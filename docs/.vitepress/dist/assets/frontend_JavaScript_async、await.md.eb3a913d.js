import{_ as s,c as n,o as a,a as l}from"./app.3986e506.js";const C=JSON.parse('{"title":"async/await","description":"","frontmatter":{},"headers":[{"level":2,"title":"async","slug":"async","link":"#async","children":[{"level":3,"title":"\u8BED\u6CD5","slug":"\u8BED\u6CD5","link":"#\u8BED\u6CD5","children":[]},{"level":3,"title":"\u5B9E\u4F8B","slug":"\u5B9E\u4F8B","link":"#\u5B9E\u4F8B","children":[]}]},{"level":2,"title":"await","slug":"await","link":"#await","children":[{"level":3,"title":"\u5B9E\u4F8B","slug":"\u5B9E\u4F8B-1","link":"#\u5B9E\u4F8B-1","children":[]}]}],"relativePath":"frontend/JavaScript/async\u3001await.md","lastUpdated":1661928310000}'),p={name:"frontend/JavaScript/async\u3001await.md"},e=l(`<h1 id="async-await" tabindex="-1">async/await <a class="header-anchor" href="#async-await" aria-hidden="true">#</a></h1><p><code>async</code>\u662F<code>ES7</code>\u7684\u4E0E\u5F02\u6B65\u64CD\u4F5C\u6709\u5173\u7684\u5173\u952E\u5B57\uFF0C\u5176\u8FD4\u56DE\u4E00\u4E2A<code>Promise</code>\u5BF9\u8C61\uFF0C<code>await</code>\u64CD\u4F5C\u7B26\u7528\u4E8E\u7B49\u5F85\u4E00\u4E2A<code>Promise</code>\u5BF9\u8C61,\u5B83\u53EA\u80FD\u5728\u5F02\u6B65\u51FD\u6570<code>async function</code>\u5185\u90E8\u4F7F\u7528\u3002<code>async/await</code>\u7684\u76EE\u7684\u662F\u7B80\u5316\u4F7F\u7528\u591A\u4E2A<code>promise</code>\u65F6\u7684\u540C\u6B65\u884C\u4E3A\uFF0C\u5E76\u5BF9\u4E00\u7EC4<code>Promises</code>\u6267\u884C\u67D0\u4E9B\u64CD\u4F5C\u3002\u6B63\u5982<code>Promises</code>\u7C7B\u4F3C\u4E8E\u7ED3\u6784\u5316\u56DE\u8C03\uFF0C<code>async/await</code>\u66F4\u50CF\u7ED3\u5408\u4E86<code>generators</code>\u548C<code>promises</code>\u3002</p><h2 id="async" tabindex="-1">async <a class="header-anchor" href="#async" aria-hidden="true">#</a></h2><h3 id="\u8BED\u6CD5" tabindex="-1">\u8BED\u6CD5 <a class="header-anchor" href="#\u8BED\u6CD5" aria-hidden="true">#</a></h3><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">name</span><span style="color:#C9D1D9;">([</span><span style="color:#FFA657;">param</span><span style="color:#C9D1D9;">[, </span><span style="color:#FFA657;">param</span><span style="color:#C9D1D9;">[, </span><span style="color:#FF7B72;">...</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">param</span><span style="color:#C9D1D9;">]]]) { statements }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>name</code>: \u51FD\u6570\u540D\u79F0\u3002</li><li><code>param</code>: \u8981\u4F20\u9012\u7ED9\u51FD\u6570\u7684\u53C2\u6570\u7684\u540D\u79F0\u3002</li><li><code>statements</code>: \u51FD\u6570\u4F53\u8BED\u53E5\u3002</li></ul><p><code>async</code>\u51FD\u6570\u8FD4\u56DE\u4E00\u4E2A<code>Promise</code>\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u4F7F\u7528<code>then</code>\u65B9\u6CD5\u6DFB\u52A0\u56DE\u8C03\u51FD\u6570\uFF0C\u8FD4\u56DE\u7684<code>Promise</code>\u5BF9\u8C61\u4F1A\u8FD0\u884C\u6267\u884C<code>resolve</code>\u5F02\u6B65\u51FD\u6570\u7684\u8FD4\u56DE\u7ED3\u679C\uFF0C\u5982\u679C\u629B\u51FA\u5F02\u5E38\u5219\u8FD0\u884C\u62D2\u7EDD<code>reject</code>\u3002</p><h3 id="\u5B9E\u4F8B" tabindex="-1">\u5B9E\u4F8B <a class="header-anchor" href="#\u5B9E\u4F8B" aria-hidden="true">#</a></h3><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">asyncPromise</span><span style="color:#C9D1D9;">(</span><span style="color:#FFA657;">v</span><span style="color:#C9D1D9;">){</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> v;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D2A8FF;">asyncPromise</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">).</span><span style="color:#D2A8FF;">then</span><span style="color:#C9D1D9;">((</span><span style="color:#FFA657;">v</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(v);</span></span>
<span class="line"><span style="color:#C9D1D9;">}).</span><span style="color:#D2A8FF;">catch</span><span style="color:#C9D1D9;">((</span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(e);</span></span>
<span class="line"><span style="color:#C9D1D9;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="await" tabindex="-1">await <a class="header-anchor" href="#await" aria-hidden="true">#</a></h2><p><code>async</code>\u4E00\u822C\u662F\u914D\u5408<code>await</code>\u6307\u4EE4\u4F7F\u7528\u7684\uFF0C\u8BE5\u6307\u4EE4\u4F1A\u6682\u505C\u5F02\u6B65\u51FD\u6570\u7684\u6267\u884C\uFF0C\u5E76\u7B49\u5F85<code>Promise</code>\u6267\u884C\uFF0C\u7136\u540E\u7EE7\u7EED\u6267\u884C\u5F02\u6B65\u51FD\u6570\uFF0C\u5E76\u8FD4\u56DE\u7ED3\u679C\u3002\u82E5<code>Promise</code>\u5904\u7406\u5F02\u5E38<code>rejected</code>\uFF0C<code>await</code>\u8868\u8FBE\u5F0F\u4F1A\u628A<code>Promise</code>\u7684\u5F02\u5E38\u539F\u56E0\u629B\u51FA\u3002\u53E6\u5916\uFF0C\u5982\u679C<code>await</code>\u64CD\u4F5C\u7B26\u540E\u7684\u8868\u8FBE\u5F0F\u7684\u503C\u4E0D\u662F\u4E00\u4E2A<code>Promise</code>\uFF0C\u5219\u8FD4\u56DE\u8BE5\u503C\u672C\u8EAB\u3002</p><h3 id="\u5B9E\u4F8B-1" tabindex="-1">\u5B9E\u4F8B <a class="header-anchor" href="#\u5B9E\u4F8B-1" aria-hidden="true">#</a></h3><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">promise</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Promise</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;">(</span><span style="color:#FFA657;">resolve</span><span style="color:#C9D1D9;">,</span><span style="color:#FFA657;">reject</span><span style="color:#C9D1D9;">){</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> rand </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> Math.</span><span style="color:#D2A8FF;">random</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#D2A8FF;">setTimeout</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#D2A8FF;">resolve</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">\`solve \${</span><span style="color:#C9D1D9;">rand</span><span style="color:#A5D6FF;">}\`</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        },</span><span style="color:#79C0FF;">1000</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    })</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">asyncPromise</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> result </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">promise</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(result);</span></span>
<span class="line"><span style="color:#C9D1D9;">})();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u6355\u6349\u5F02\u5E38</span></span>
<span class="line"><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">promise</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Promise</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;">(</span><span style="color:#FFA657;">resolve</span><span style="color:#C9D1D9;">,</span><span style="color:#FFA657;">reject</span><span style="color:#C9D1D9;">){</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">throw</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Error</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">\`reject\`</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    })</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">asyncPromise</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> result </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">promise</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(result);</span></span>
<span class="line"><span style="color:#C9D1D9;">})().</span><span style="color:#D2A8FF;">catch</span><span style="color:#C9D1D9;">((</span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(e);</span></span>
<span class="line"><span style="color:#C9D1D9;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u975Epromise\u5BF9\u8C61\u76F4\u63A5\u8FD4\u56DE\u8BE5\u503C\u672C\u8EAB</span></span>
<span class="line"><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">notPromise</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">asyncPromise</span><span style="color:#C9D1D9;">(){</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> result </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">notPromise</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(result);</span></span>
<span class="line"><span style="color:#C9D1D9;">})();</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div>`,13),o=[e];function c(r,t,D,i,y,F){return a(),n("div",null,o)}const b=s(p,[["render",c]]);export{C as __pageData,b as default};
