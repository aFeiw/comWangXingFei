import{_ as s,c as n,o as a,a as l}from"./app.3b62a9a0.js";const C=JSON.parse('{"title":"Spring Boot \u5B66\u4E60\u7B14\u8BB0","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u76EE\u5F55","slug":"\u76EE\u5F55","link":"#\u76EE\u5F55","children":[{"level":3,"title":"\u57FA\u7840\u6982\u5FF5","slug":"\u57FA\u7840\u6982\u5FF5","link":"#\u57FA\u7840\u6982\u5FF5","children":[]},{"level":3,"title":"\u6838\u5FC3\u529F\u80FD","slug":"\u6838\u5FC3\u529F\u80FD","link":"#\u6838\u5FC3\u529F\u80FD","children":[]},{"level":3,"title":"\u9AD8\u7EA7\u7279\u6027","slug":"\u9AD8\u7EA7\u7279\u6027","link":"#\u9AD8\u7EA7\u7279\u6027","children":[]}]},{"level":2,"title":"\u5FEB\u901F\u5F00\u59CB","slug":"\u5FEB\u901F\u5F00\u59CB","link":"#\u5FEB\u901F\u5F00\u59CB","children":[{"level":3,"title":"\u521B\u5EFA\u9879\u76EE","slug":"\u521B\u5EFA\u9879\u76EE","link":"#\u521B\u5EFA\u9879\u76EE","children":[]},{"level":3,"title":"\u57FA\u7840\u5E94\u7528","slug":"\u57FA\u7840\u5E94\u7528","link":"#\u57FA\u7840\u5E94\u7528","children":[]},{"level":3,"title":"RESTful API","slug":"restful-api","link":"#restful-api","children":[]}]},{"level":2,"title":"\u6838\u5FC3\u7279\u6027","slug":"\u6838\u5FC3\u7279\u6027","link":"#\u6838\u5FC3\u7279\u6027","children":[{"level":3,"title":"\u81EA\u52A8\u914D\u7F6E","slug":"\u81EA\u52A8\u914D\u7F6E","link":"#\u81EA\u52A8\u914D\u7F6E","children":[]},{"level":3,"title":"\u914D\u7F6E\u5C5E\u6027","slug":"\u914D\u7F6E\u5C5E\u6027","link":"#\u914D\u7F6E\u5C5E\u6027","children":[]},{"level":3,"title":"\u6570\u636E\u8BBF\u95EE","slug":"\u6570\u636E\u8BBF\u95EE","link":"#\u6570\u636E\u8BBF\u95EE","children":[]}]},{"level":2,"title":"Web \u5F00\u53D1","slug":"web-\u5F00\u53D1","link":"#web-\u5F00\u53D1","children":[{"level":3,"title":"\u63A7\u5236\u5668","slug":"\u63A7\u5236\u5668","link":"#\u63A7\u5236\u5668","children":[]},{"level":3,"title":"\u5F02\u5E38\u5904\u7406","slug":"\u5F02\u5E38\u5904\u7406","link":"#\u5F02\u5E38\u5904\u7406","children":[]}]},{"level":2,"title":"\u5B89\u5168\u914D\u7F6E","slug":"\u5B89\u5168\u914D\u7F6E","link":"#\u5B89\u5168\u914D\u7F6E","children":[{"level":3,"title":"Spring Security","slug":"spring-security","link":"#spring-security","children":[]},{"level":3,"title":"JWT \u8BA4\u8BC1","slug":"jwt-\u8BA4\u8BC1","link":"#jwt-\u8BA4\u8BC1","children":[]}]},{"level":2,"title":"\u7F13\u5B58\u673A\u5236","slug":"\u7F13\u5B58\u673A\u5236","link":"#\u7F13\u5B58\u673A\u5236","children":[{"level":3,"title":"Redis \u7F13\u5B58","slug":"redis-\u7F13\u5B58","link":"#redis-\u7F13\u5B58","children":[]}]},{"level":2,"title":"\u76D1\u63A7\u7BA1\u7406","slug":"\u76D1\u63A7\u7BA1\u7406","link":"#\u76D1\u63A7\u7BA1\u7406","children":[{"level":3,"title":"Actuator","slug":"actuator","link":"#actuator","children":[]},{"level":3,"title":"\u81EA\u5B9A\u4E49\u5065\u5EB7\u68C0\u67E5","slug":"\u81EA\u5B9A\u4E49\u5065\u5EB7\u68C0\u67E5","link":"#\u81EA\u5B9A\u4E49\u5065\u5EB7\u68C0\u67E5","children":[]}]},{"level":2,"title":"\u6027\u80FD\u4F18\u5316","slug":"\u6027\u80FD\u4F18\u5316","link":"#\u6027\u80FD\u4F18\u5316","children":[{"level":3,"title":"\u8FDE\u63A5\u6C60\u914D\u7F6E","slug":"\u8FDE\u63A5\u6C60\u914D\u7F6E","link":"#\u8FDE\u63A5\u6C60\u914D\u7F6E","children":[]},{"level":3,"title":"\u5F02\u6B65\u5904\u7406","slug":"\u5F02\u6B65\u5904\u7406","link":"#\u5F02\u6B65\u5904\u7406","children":[]}]},{"level":2,"title":"\u90E8\u7F72\u7B56\u7565","slug":"\u90E8\u7F72\u7B56\u7565","link":"#\u90E8\u7F72\u7B56\u7565","children":[{"level":3,"title":"Docker \u90E8\u7F72","slug":"docker-\u90E8\u7F72","link":"#docker-\u90E8\u7F72","children":[]},{"level":3,"title":"\u751F\u4EA7\u73AF\u5883\u914D\u7F6E","slug":"\u751F\u4EA7\u73AF\u5883\u914D\u7F6E","link":"#\u751F\u4EA7\u73AF\u5883\u914D\u7F6E","children":[]}]},{"level":2,"title":"\u6700\u4F73\u5B9E\u8DF5","slug":"\u6700\u4F73\u5B9E\u8DF5","link":"#\u6700\u4F73\u5B9E\u8DF5","children":[{"level":3,"title":"\u9879\u76EE\u7ED3\u6784","slug":"\u9879\u76EE\u7ED3\u6784","link":"#\u9879\u76EE\u7ED3\u6784","children":[]},{"level":3,"title":"\u6D4B\u8BD5","slug":"\u6D4B\u8BD5","link":"#\u6D4B\u8BD5","children":[]}]}],"relativePath":"backend/SpringBoot/index.md","lastUpdated":1754016123000}'),p={name:"backend/SpringBoot/index.md"},e=l(`<h1 id="spring-boot-\u5B66\u4E60\u7B14\u8BB0" tabindex="-1">Spring Boot \u5B66\u4E60\u7B14\u8BB0 <a class="header-anchor" href="#spring-boot-\u5B66\u4E60\u7B14\u8BB0" aria-hidden="true">#</a></h1><p>Spring Boot \u662F\u4E00\u4E2A\u57FA\u4E8E Spring \u6846\u67B6\u7684\u5FEB\u901F\u5F00\u53D1\u5E73\u53F0\uFF0C\u7B80\u5316\u4E86 Spring \u5E94\u7528\u7684\u914D\u7F6E\u548C\u90E8\u7F72\u3002</p><h2 id="\u76EE\u5F55" tabindex="-1">\u76EE\u5F55 <a class="header-anchor" href="#\u76EE\u5F55" aria-hidden="true">#</a></h2><h3 id="\u57FA\u7840\u6982\u5FF5" tabindex="-1">\u57FA\u7840\u6982\u5FF5 <a class="header-anchor" href="#\u57FA\u7840\u6982\u5FF5" aria-hidden="true">#</a></h3><ul><li>Spring Boot \u67B6\u6784\u7406\u89E3</li><li>\u81EA\u52A8\u914D\u7F6E\u539F\u7406</li><li>\u542F\u52A8\u6D41\u7A0B\u8BE6\u89E3</li><li>\u914D\u7F6E\u7BA1\u7406</li></ul><h3 id="\u6838\u5FC3\u529F\u80FD" tabindex="-1">\u6838\u5FC3\u529F\u80FD <a class="header-anchor" href="#\u6838\u5FC3\u529F\u80FD" aria-hidden="true">#</a></h3><ul><li>Web \u5F00\u53D1</li><li>\u6570\u636E\u8BBF\u95EE</li><li>\u5B89\u5168\u8BA4\u8BC1</li><li>\u7F13\u5B58\u673A\u5236</li></ul><h3 id="\u9AD8\u7EA7\u7279\u6027" tabindex="-1">\u9AD8\u7EA7\u7279\u6027 <a class="header-anchor" href="#\u9AD8\u7EA7\u7279\u6027" aria-hidden="true">#</a></h3><ul><li>\u5FAE\u670D\u52A1\u67B6\u6784</li><li>\u76D1\u63A7\u7BA1\u7406</li><li>\u6027\u80FD\u4F18\u5316</li><li>\u90E8\u7F72\u7B56\u7565</li></ul><h2 id="\u5FEB\u901F\u5F00\u59CB" tabindex="-1">\u5FEB\u901F\u5F00\u59CB <a class="header-anchor" href="#\u5FEB\u901F\u5F00\u59CB" aria-hidden="true">#</a></h2><h3 id="\u521B\u5EFA\u9879\u76EE" tabindex="-1">\u521B\u5EFA\u9879\u76EE <a class="header-anchor" href="#\u521B\u5EFA\u9879\u76EE" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u4F7F\u7528 Spring Initializr</span></span>
<span class="line"><span style="color:#C9D1D9;">curl https://start.spring.io/starter.zip \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d dependencies=web,data-jpa \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d type=maven-project \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d language=java \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d bootVersion=3.2.0 \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d baseDir=demo \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d groupId=com.example \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d artifactId=demo \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d name=demo \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d description=</span><span style="color:#A5D6FF;">&quot;Demo project&quot;</span><span style="color:#C9D1D9;"> \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d packageName=com.example.demo \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d packaging=jar \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -d javaVersion=17 \\</span></span>
<span class="line"><span style="color:#C9D1D9;">  -o demo.zip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u89E3\u538B\u5E76\u8FDB\u5165\u9879\u76EE</span></span>
<span class="line"><span style="color:#C9D1D9;">unzip demo.zip</span></span>
<span class="line"><span style="color:#79C0FF;">cd</span><span style="color:#C9D1D9;"> demo</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="\u57FA\u7840\u5E94\u7528" tabindex="-1">\u57FA\u7840\u5E94\u7528 <a class="header-anchor" href="#\u57FA\u7840\u5E94\u7528" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#8B949E;">// DemoApplication.java</span></span>
<span class="line"><span style="color:#FF7B72;">package</span><span style="color:#C9D1D9;"> com.example.demo;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> org.springframework.boot.SpringApplication;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> org.springframework.boot.autoconfigure.SpringBootApplication;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">SpringBootApplication</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">DemoApplication</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">[] </span><span style="color:#FFA657;">args</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        SpringApplication.</span><span style="color:#D2A8FF;">run</span><span style="color:#C9D1D9;">(DemoApplication.class, args);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="restful-api" tabindex="-1">RESTful API <a class="header-anchor" href="#restful-api" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#8B949E;">// HelloController.java</span></span>
<span class="line"><span style="color:#FF7B72;">package</span><span style="color:#C9D1D9;"> com.example.demo.controller;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> org.springframework.web.bind.annotation.</span><span style="color:#79C0FF;">*</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">RestController</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">RequestMapping</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/api&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">HelloController</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">GetMapping</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/hello&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">hello</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;Hello, Spring Boot!&quot;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">GetMapping</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/hello/{name}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">helloWithName</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">PathVariable</span><span style="color:#C9D1D9;"> String </span><span style="color:#FFA657;">name</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;Hello, &quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> name </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;!&quot;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">PostMapping</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/user&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> User </span><span style="color:#D2A8FF;">createUser</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">RequestBody</span><span style="color:#C9D1D9;"> User </span><span style="color:#FFA657;">user</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u5904\u7406\u7528\u6237\u521B\u5EFA\u903B\u8F91</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> user;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="\u6838\u5FC3\u7279\u6027" tabindex="-1">\u6838\u5FC3\u7279\u6027 <a class="header-anchor" href="#\u6838\u5FC3\u7279\u6027" aria-hidden="true">#</a></h2><h3 id="\u81EA\u52A8\u914D\u7F6E" tabindex="-1">\u81EA\u52A8\u914D\u7F6E <a class="header-anchor" href="#\u81EA\u52A8\u914D\u7F6E" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#8B949E;">// \u81EA\u5B9A\u4E49\u81EA\u52A8\u914D\u7F6E</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Configuration</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">ConditionalOnClass</span><span style="color:#C9D1D9;">(DataSource.class)</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">EnableConfigurationProperties</span><span style="color:#C9D1D9;">(DatabaseProperties.class)</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">DatabaseAutoConfiguration</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">ConditionalOnMissingBean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> DataSource </span><span style="color:#D2A8FF;">dataSource</span><span style="color:#C9D1D9;">(DatabaseProperties </span><span style="color:#FFA657;">properties</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u521B\u5EFA\u6570\u636E\u6E90</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">HikariDataSource</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="\u914D\u7F6E\u5C5E\u6027" tabindex="-1">\u914D\u7F6E\u5C5E\u6027 <a class="header-anchor" href="#\u914D\u7F6E\u5C5E\u6027" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#8B949E;">// application.yml</span></span>
<span class="line"><span style="color:#C9D1D9;">spring</span><span style="color:#FF7B72;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  datasource</span><span style="color:#FF7B72;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    url</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> jdbc</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;">mysql</span><span style="color:#FF7B72;">:</span><span style="color:#8B949E;">//localhost:3306/demo</span></span>
<span class="line"><span style="color:#C9D1D9;">    username</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> root</span></span>
<span class="line"><span style="color:#C9D1D9;">    password</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> password</span></span>
<span class="line"><span style="color:#C9D1D9;">    driver</span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;">class</span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;">name</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  jpa</span><span style="color:#FF7B72;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    hibernate</span><span style="color:#FF7B72;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      ddl</span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;">auto</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> update</span></span>
<span class="line"><span style="color:#C9D1D9;">    show</span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;">sql</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">true</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">server</span><span style="color:#FF7B72;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  port</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">8080</span></span>
<span class="line"><span style="color:#C9D1D9;">  servlet</span><span style="color:#FF7B72;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    context</span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;">path</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">/</span><span style="color:#C9D1D9;">api</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="\u6570\u636E\u8BBF\u95EE" tabindex="-1">\u6570\u636E\u8BBF\u95EE <a class="header-anchor" href="#\u6570\u636E\u8BBF\u95EE" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#8B949E;">// User.java</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Entity</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Table</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">name</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;users&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">User</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Id</span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">GeneratedValue</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">strategy</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> GenerationType.IDENTITY)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> Long</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">id;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Column</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">nullable</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">name;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Column</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">unique</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">email;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// getters and setters</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// UserRepository.java</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Repository</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">interface</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserRepository</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">JpaRepository</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">, </span><span style="color:#FF7B72;">Long</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">    Optional&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">findByEmail</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">email</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    List&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">findByNameContaining</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">name</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="web-\u5F00\u53D1" tabindex="-1">Web \u5F00\u53D1 <a class="header-anchor" href="#web-\u5F00\u53D1" aria-hidden="true">#</a></h2><h3 id="\u63A7\u5236\u5668" tabindex="-1">\u63A7\u5236\u5668 <a class="header-anchor" href="#\u63A7\u5236\u5668" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">RestController</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">RequestMapping</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/api/users&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserController</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Autowired</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> UserService</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userService;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">GetMapping</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> List&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">getAllUsers</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> userService.</span><span style="color:#D2A8FF;">findAll</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">GetMapping</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/{id}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> ResponseEntity&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">getUserById</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">PathVariable</span><span style="color:#C9D1D9;"> Long </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> userService.</span><span style="color:#D2A8FF;">findById</span><span style="color:#C9D1D9;">(id)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">map</span><span style="color:#C9D1D9;">(ResponseEntity</span><span style="color:#FF7B72;">::</span><span style="color:#C9D1D9;">ok)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">orElse</span><span style="color:#C9D1D9;">(ResponseEntity.</span><span style="color:#D2A8FF;">notFound</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">PostMapping</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> ResponseEntity&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">createUser</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">Valid</span><span style="color:#C9D1D9;"> @</span><span style="color:#FF7B72;">RequestBody</span><span style="color:#C9D1D9;"> User </span><span style="color:#FFA657;">user</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        User</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">savedUser</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userService.</span><span style="color:#D2A8FF;">save</span><span style="color:#C9D1D9;">(user);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> ResponseEntity.</span><span style="color:#D2A8FF;">created</span><span style="color:#C9D1D9;">(URI.</span><span style="color:#D2A8FF;">create</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/api/users/&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> savedUser.</span><span style="color:#D2A8FF;">getId</span><span style="color:#C9D1D9;">()))</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">body</span><span style="color:#C9D1D9;">(savedUser);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">PutMapping</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/{id}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> ResponseEntity&lt;</span><span style="color:#FF7B72;">User</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">updateUser</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">PathVariable</span><span style="color:#C9D1D9;"> Long </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">, @</span><span style="color:#FF7B72;">RequestBody</span><span style="color:#C9D1D9;"> User </span><span style="color:#FFA657;">user</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> userService.</span><span style="color:#D2A8FF;">update</span><span style="color:#C9D1D9;">(id, user)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">map</span><span style="color:#C9D1D9;">(ResponseEntity</span><span style="color:#FF7B72;">::</span><span style="color:#C9D1D9;">ok)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">orElse</span><span style="color:#C9D1D9;">(ResponseEntity.</span><span style="color:#D2A8FF;">notFound</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">DeleteMapping</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/{id}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> ResponseEntity&lt;</span><span style="color:#FF7B72;">Void</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">deleteUser</span><span style="color:#C9D1D9;">(@</span><span style="color:#FF7B72;">PathVariable</span><span style="color:#C9D1D9;"> Long </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (userService.</span><span style="color:#D2A8FF;">delete</span><span style="color:#C9D1D9;">(id)) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> ResponseEntity.</span><span style="color:#D2A8FF;">noContent</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> ResponseEntity.</span><span style="color:#D2A8FF;">notFound</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="\u5F02\u5E38\u5904\u7406" tabindex="-1">\u5F02\u5E38\u5904\u7406 <a class="header-anchor" href="#\u5F02\u5E38\u5904\u7406" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">ControllerAdvice</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">GlobalExceptionHandler</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">ExceptionHandler</span><span style="color:#C9D1D9;">(Exception.class)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> ResponseEntity&lt;</span><span style="color:#FF7B72;">ErrorResponse</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">handleException</span><span style="color:#C9D1D9;">(Exception </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        ErrorResponse</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">error</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">ErrorResponse</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">            HttpStatus.INTERNAL_SERVER_ERROR.</span><span style="color:#D2A8FF;">value</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#A5D6FF;">&quot;Internal Server Error&quot;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">            e.</span><span style="color:#D2A8FF;">getMessage</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">        );</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> ResponseEntity.</span><span style="color:#D2A8FF;">status</span><span style="color:#C9D1D9;">(HttpStatus.INTERNAL_SERVER_ERROR).</span><span style="color:#D2A8FF;">body</span><span style="color:#C9D1D9;">(error);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">ExceptionHandler</span><span style="color:#C9D1D9;">(MethodArgumentNotValidException.class)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> ResponseEntity&lt;</span><span style="color:#FF7B72;">ErrorResponse</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">handleValidationException</span><span style="color:#C9D1D9;">(MethodArgumentNotValidException </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        List</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">errors</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> e.</span><span style="color:#D2A8FF;">getBindingResult</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">getFieldErrors</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">stream</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">map</span><span style="color:#C9D1D9;">(FieldError</span><span style="color:#FF7B72;">::</span><span style="color:#C9D1D9;">getDefaultMessage)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">collect</span><span style="color:#C9D1D9;">(Collectors.</span><span style="color:#D2A8FF;">toList</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        ErrorResponse</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">error</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">ErrorResponse</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">            HttpStatus.BAD_REQUEST.</span><span style="color:#D2A8FF;">value</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#A5D6FF;">&quot;Validation Error&quot;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">            errors.</span><span style="color:#D2A8FF;">toString</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">        );</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> ResponseEntity.</span><span style="color:#D2A8FF;">badRequest</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">body</span><span style="color:#C9D1D9;">(error);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="\u5B89\u5168\u914D\u7F6E" tabindex="-1">\u5B89\u5168\u914D\u7F6E <a class="header-anchor" href="#\u5B89\u5168\u914D\u7F6E" aria-hidden="true">#</a></h2><h3 id="spring-security" tabindex="-1">Spring Security <a class="header-anchor" href="#spring-security" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Configuration</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">EnableWebSecurity</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">SecurityConfig</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> SecurityFilterChain </span><span style="color:#D2A8FF;">filterChain</span><span style="color:#C9D1D9;">(HttpSecurity </span><span style="color:#FFA657;">http</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">throws</span><span style="color:#C9D1D9;"> Exception {</span></span>
<span class="line"><span style="color:#C9D1D9;">        http</span></span>
<span class="line"><span style="color:#C9D1D9;">            .</span><span style="color:#D2A8FF;">authorizeHttpRequests</span><span style="color:#C9D1D9;">(authz </span><span style="color:#FF7B72;">-&gt;</span><span style="color:#C9D1D9;"> authz</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">requestMatchers</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/api/public/**&quot;</span><span style="color:#C9D1D9;">).</span><span style="color:#D2A8FF;">permitAll</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">requestMatchers</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/api/admin/**&quot;</span><span style="color:#C9D1D9;">).</span><span style="color:#D2A8FF;">hasRole</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;ADMIN&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">anyRequest</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">authenticated</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">            )</span></span>
<span class="line"><span style="color:#C9D1D9;">            .</span><span style="color:#D2A8FF;">formLogin</span><span style="color:#C9D1D9;">(form </span><span style="color:#FF7B72;">-&gt;</span><span style="color:#C9D1D9;"> form</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">loginPage</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/login&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">permitAll</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">            )</span></span>
<span class="line"><span style="color:#C9D1D9;">            .</span><span style="color:#D2A8FF;">logout</span><span style="color:#C9D1D9;">(logout </span><span style="color:#FF7B72;">-&gt;</span><span style="color:#C9D1D9;"> logout</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">logoutSuccessUrl</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;/&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">            )</span></span>
<span class="line"><span style="color:#C9D1D9;">            .</span><span style="color:#D2A8FF;">csrf</span><span style="color:#C9D1D9;">(csrf </span><span style="color:#FF7B72;">-&gt;</span><span style="color:#C9D1D9;"> csrf.</span><span style="color:#D2A8FF;">disable</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> http.</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> PasswordEncoder </span><span style="color:#D2A8FF;">passwordEncoder</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">BCryptPasswordEncoder</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="jwt-\u8BA4\u8BC1" tabindex="-1">JWT \u8BA4\u8BC1 <a class="header-anchor" href="#jwt-\u8BA4\u8BC1" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Component</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">JwtTokenProvider</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Value</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\${jwt.secret}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> String</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">jwtSecret;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Value</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;\${jwt.expiration}&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">long</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">jwtExpiration;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">generateToken</span><span style="color:#C9D1D9;">(Authentication </span><span style="color:#FFA657;">authentication</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        UserDetails</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userPrincipal</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> (UserDetails) authentication.</span><span style="color:#D2A8FF;">getPrincipal</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        Date</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">now</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Date</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        Date</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">expiryDate</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Date</span><span style="color:#C9D1D9;">(now.</span><span style="color:#D2A8FF;">getTime</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> jwtExpiration);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> Jwts.</span><span style="color:#D2A8FF;">builder</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">setSubject</span><span style="color:#C9D1D9;">(userPrincipal.</span><span style="color:#D2A8FF;">getUsername</span><span style="color:#C9D1D9;">())</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">setIssuedAt</span><span style="color:#C9D1D9;">(now)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">setExpiration</span><span style="color:#C9D1D9;">(expiryDate)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">signWith</span><span style="color:#C9D1D9;">(SignatureAlgorithm.HS512, jwtSecret)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">compact</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> String </span><span style="color:#D2A8FF;">getUsernameFromToken</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">token</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        Claims</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">claims</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> Jwts.</span><span style="color:#D2A8FF;">parser</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">setSigningKey</span><span style="color:#C9D1D9;">(jwtSecret)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">parseClaimsJws</span><span style="color:#C9D1D9;">(token)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">getBody</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> claims.</span><span style="color:#D2A8FF;">getSubject</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">boolean</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">validateToken</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">token</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">            Jwts.</span><span style="color:#D2A8FF;">parser</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">setSigningKey</span><span style="color:#C9D1D9;">(jwtSecret).</span><span style="color:#D2A8FF;">parseClaimsJws</span><span style="color:#C9D1D9;">(token);</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (SignatureException </span><span style="color:#FFA657;">ex</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;">// \u65E0\u6548\u7684 JWT \u7B7E\u540D</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (MalformedJwtException </span><span style="color:#FFA657;">ex</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;">// \u65E0\u6548\u7684 JWT \u4EE4\u724C</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (ExpiredJwtException </span><span style="color:#FFA657;">ex</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;">// \u8FC7\u671F\u7684 JWT \u4EE4\u724C</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (UnsupportedJwtException </span><span style="color:#FFA657;">ex</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;">// \u4E0D\u652F\u6301\u7684 JWT \u4EE4\u724C</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (IllegalArgumentException </span><span style="color:#FFA657;">ex</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;">// JWT \u58F0\u660E\u5B57\u7B26\u4E32\u4E3A\u7A7A</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h2 id="\u7F13\u5B58\u673A\u5236" tabindex="-1">\u7F13\u5B58\u673A\u5236 <a class="header-anchor" href="#\u7F13\u5B58\u673A\u5236" aria-hidden="true">#</a></h2><h3 id="redis-\u7F13\u5B58" tabindex="-1">Redis \u7F13\u5B58 <a class="header-anchor" href="#redis-\u7F13\u5B58" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Configuration</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">EnableCaching</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CacheConfig</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> RedisTemplate&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">, </span><span style="color:#FF7B72;">Object</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">redisTemplate</span><span style="color:#C9D1D9;">(RedisConnectionFactory </span><span style="color:#FFA657;">factory</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        RedisTemplate</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">, </span><span style="color:#FF7B72;">Object</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">template</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> RedisTemplate&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">setConnectionFactory</span><span style="color:#C9D1D9;">(factory);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        Jackson2JsonRedisSerializer</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Object</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">serializer</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> Jackson2JsonRedisSerializer&lt;&gt;(Object.class);</span></span>
<span class="line"><span style="color:#C9D1D9;">        ObjectMapper</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">mapper</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">ObjectMapper</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        mapper.</span><span style="color:#D2A8FF;">setVisibility</span><span style="color:#C9D1D9;">(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span></span>
<span class="line"><span style="color:#C9D1D9;">        mapper.</span><span style="color:#D2A8FF;">activateDefaultTyping</span><span style="color:#C9D1D9;">(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL);</span></span>
<span class="line"><span style="color:#C9D1D9;">        serializer.</span><span style="color:#D2A8FF;">setObjectMapper</span><span style="color:#C9D1D9;">(mapper);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">setKeySerializer</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">StringRedisSerializer</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">setValueSerializer</span><span style="color:#C9D1D9;">(serializer);</span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">setHashKeySerializer</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">StringRedisSerializer</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">setHashValueSerializer</span><span style="color:#C9D1D9;">(serializer);</span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">afterPropertiesSet</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> template;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u4F7F\u7528\u7F13\u5B58</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Service</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserService</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Cacheable</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;users&quot;</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">key</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;#id&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> User </span><span style="color:#D2A8FF;">findById</span><span style="color:#C9D1D9;">(Long </span><span style="color:#FFA657;">id</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u4ECE\u6570\u636E\u5E93\u67E5\u8BE2\u7528\u6237</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> userRepository.</span><span style="color:#D2A8FF;">findById</span><span style="color:#C9D1D9;">(id).</span><span style="color:#D2A8FF;">orElse</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">CacheEvict</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;users&quot;</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">key</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;#user.id&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> User </span><span style="color:#D2A8FF;">save</span><span style="color:#C9D1D9;">(User </span><span style="color:#FFA657;">user</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> userRepository.</span><span style="color:#D2A8FF;">save</span><span style="color:#C9D1D9;">(user);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="\u76D1\u63A7\u7BA1\u7406" tabindex="-1">\u76D1\u63A7\u7BA1\u7406 <a class="header-anchor" href="#\u76D1\u63A7\u7BA1\u7406" aria-hidden="true">#</a></h2><h3 id="actuator" tabindex="-1">Actuator <a class="header-anchor" href="#actuator" aria-hidden="true">#</a></h3><div class="language-xml line-numbers-mode"><button class="copy"></button><span class="lang">xml</span><pre><code><span class="line"><span style="color:#8B949E;">&lt;!-- pom.xml --&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;org.springframework.boot&lt;/</span><span style="color:#7EE787;">groupId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;spring-boot-starter-actuator&lt;/</span><span style="color:#7EE787;">artifactId</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">dependency</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-yaml line-numbers-mode"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#8B949E;"># application.yml</span></span>
<span class="line"><span style="color:#7EE787;">management</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">endpoints</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">web</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">exposure</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#7EE787;">include</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">health,info,metrics,prometheus</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">endpoint</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">health</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">show-details</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">always</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">metrics</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">export</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">prometheus</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#7EE787;">enabled</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="\u81EA\u5B9A\u4E49\u5065\u5EB7\u68C0\u67E5" tabindex="-1">\u81EA\u5B9A\u4E49\u5065\u5EB7\u68C0\u67E5 <a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u5065\u5EB7\u68C0\u67E5" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Component</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">DatabaseHealthIndicator</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">implements</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">HealthIndicator</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Autowired</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> DataSource</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">dataSource;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Health </span><span style="color:#D2A8FF;">health</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> (Connection</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">connection</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> dataSource.</span><span style="color:#D2A8FF;">getConnection</span><span style="color:#C9D1D9;">()) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (connection.</span><span style="color:#D2A8FF;">isValid</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">1000</span><span style="color:#C9D1D9;">)) {</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> Health.</span><span style="color:#D2A8FF;">up</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                        .</span><span style="color:#D2A8FF;">withDetail</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;database&quot;</span><span style="color:#C9D1D9;">, </span><span style="color:#A5D6FF;">&quot;Available&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">                        .</span><span style="color:#D2A8FF;">withDetail</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;url&quot;</span><span style="color:#C9D1D9;">, connection.</span><span style="color:#D2A8FF;">getMetaData</span><span style="color:#C9D1D9;">().</span><span style="color:#D2A8FF;">getURL</span><span style="color:#C9D1D9;">())</span></span>
<span class="line"><span style="color:#C9D1D9;">                        .</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">            }</span></span>
<span class="line"><span style="color:#C9D1D9;">        } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (SQLException </span><span style="color:#FFA657;">e</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> Health.</span><span style="color:#D2A8FF;">down</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                    .</span><span style="color:#D2A8FF;">withDetail</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;database&quot;</span><span style="color:#C9D1D9;">, </span><span style="color:#A5D6FF;">&quot;Unavailable&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">                    .</span><span style="color:#D2A8FF;">withDetail</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;error&quot;</span><span style="color:#C9D1D9;">, e.</span><span style="color:#D2A8FF;">getMessage</span><span style="color:#C9D1D9;">())</span></span>
<span class="line"><span style="color:#C9D1D9;">                    .</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> Health.</span><span style="color:#D2A8FF;">down</span><span style="color:#C9D1D9;">()</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">withDetail</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;database&quot;</span><span style="color:#C9D1D9;">, </span><span style="color:#A5D6FF;">&quot;Unknown&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">                .</span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="\u6027\u80FD\u4F18\u5316" tabindex="-1">\u6027\u80FD\u4F18\u5316 <a class="header-anchor" href="#\u6027\u80FD\u4F18\u5316" aria-hidden="true">#</a></h2><h3 id="\u8FDE\u63A5\u6C60\u914D\u7F6E" tabindex="-1">\u8FDE\u63A5\u6C60\u914D\u7F6E <a class="header-anchor" href="#\u8FDE\u63A5\u6C60\u914D\u7F6E" aria-hidden="true">#</a></h3><div class="language-yaml line-numbers-mode"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#8B949E;"># application.yml</span></span>
<span class="line"><span style="color:#7EE787;">spring</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">datasource</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">hikari</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">maximum-pool-size</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">20</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">minimum-idle</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">5</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">connection-timeout</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">30000</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">idle-timeout</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">600000</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">max-lifetime</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">1800000</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="\u5F02\u6B65\u5904\u7406" tabindex="-1">\u5F02\u6B65\u5904\u7406 <a class="header-anchor" href="#\u5F02\u6B65\u5904\u7406" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Configuration</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">EnableAsync</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">AsyncConfig</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">implements</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">AsyncConfigurer</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> Executor </span><span style="color:#D2A8FF;">getAsyncExecutor</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        ThreadPoolTaskExecutor</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">executor</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">ThreadPoolTaskExecutor</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        executor.</span><span style="color:#D2A8FF;">setCorePoolSize</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">5</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        executor.</span><span style="color:#D2A8FF;">setMaxPoolSize</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">10</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        executor.</span><span style="color:#D2A8FF;">setQueueCapacity</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">25</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        executor.</span><span style="color:#D2A8FF;">setThreadNamePrefix</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;Async-&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        executor.</span><span style="color:#D2A8FF;">initialize</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> executor;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Override</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> AsyncUncaughtExceptionHandler </span><span style="color:#D2A8FF;">getAsyncUncaughtExceptionHandler</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">SimpleAsyncUncaughtExceptionHandler</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Service</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">EmailService</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Async</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> CompletableFuture&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">sendEmail</span><span style="color:#C9D1D9;">(String </span><span style="color:#FFA657;">to</span><span style="color:#C9D1D9;">, String </span><span style="color:#FFA657;">subject</span><span style="color:#C9D1D9;">, String </span><span style="color:#FFA657;">content</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u53D1\u9001\u90AE\u4EF6\u903B\u8F91</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> CompletableFuture.</span><span style="color:#D2A8FF;">completedFuture</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;Email sent to &quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> to);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="\u90E8\u7F72\u7B56\u7565" tabindex="-1">\u90E8\u7F72\u7B56\u7565 <a class="header-anchor" href="#\u90E8\u7F72\u7B56\u7565" aria-hidden="true">#</a></h2><h3 id="docker-\u90E8\u7F72" tabindex="-1">Docker \u90E8\u7F72 <a class="header-anchor" href="#docker-\u90E8\u7F72" aria-hidden="true">#</a></h3><div class="language-docker line-numbers-mode"><button class="copy"></button><span class="lang">docker</span><pre><code><span class="line"><span style="color:#8B949E;"># Dockerfile</span></span>
<span class="line"><span style="color:#FF7B72;">FROM</span><span style="color:#C9D1D9;"> openjdk:17-jdk-slim</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">WORKDIR</span><span style="color:#C9D1D9;"> /app</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">COPY</span><span style="color:#C9D1D9;"> target/demo-0.0.1-SNAPSHOT.jar app.jar</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">EXPOSE</span><span style="color:#C9D1D9;"> 8080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">ENTRYPOINT</span><span style="color:#C9D1D9;"> [</span><span style="color:#A5D6FF;">&quot;java&quot;</span><span style="color:#C9D1D9;">, </span><span style="color:#A5D6FF;">&quot;-jar&quot;</span><span style="color:#C9D1D9;">, </span><span style="color:#A5D6FF;">&quot;app.jar&quot;</span><span style="color:#C9D1D9;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-yaml line-numbers-mode"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#8B949E;"># docker-compose.yml</span></span>
<span class="line"><span style="color:#7EE787;">version</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">&#39;3.8&#39;</span></span>
<span class="line"><span style="color:#7EE787;">services</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">app</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">build</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">.</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">ports</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      - </span><span style="color:#A5D6FF;">&quot;8080:8080&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">environment</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      - </span><span style="color:#A5D6FF;">SPRING_PROFILES_ACTIVE=docker</span></span>
<span class="line"><span style="color:#C9D1D9;">      - </span><span style="color:#A5D6FF;">SPRING_DATASOURCE_URL=jdbc:mysql://db:3306/demo</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">depends_on</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      - </span><span style="color:#A5D6FF;">db</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">db</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">image</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">mysql:8.0</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">environment</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">MYSQL_ROOT_PASSWORD</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">password</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">MYSQL_DATABASE</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">demo</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">ports</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      - </span><span style="color:#A5D6FF;">&quot;3306:3306&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">volumes</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      - </span><span style="color:#A5D6FF;">mysql_data:/var/lib/mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7EE787;">volumes</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">mysql_data</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="\u751F\u4EA7\u73AF\u5883\u914D\u7F6E" tabindex="-1">\u751F\u4EA7\u73AF\u5883\u914D\u7F6E <a class="header-anchor" href="#\u751F\u4EA7\u73AF\u5883\u914D\u7F6E" aria-hidden="true">#</a></h3><div class="language-yaml line-numbers-mode"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#8B949E;"># application-prod.yml</span></span>
<span class="line"><span style="color:#7EE787;">spring</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">profiles</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">prod</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">datasource</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">url</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">jdbc:mysql://\${DB_HOST:localhost}:\${DB_PORT:3306}/\${DB_NAME:demo}</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">username</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">\${DB_USERNAME:root}</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">password</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">\${DB_PASSWORD:password}</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">jpa</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">hibernate</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#7EE787;">ddl-auto</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">validate</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">show-sql</span><span style="color:#C9D1D9;">: </span><span style="color:#79C0FF;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7EE787;">server</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">port</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">\${PORT:8080}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7EE787;">logging</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">level</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">root</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">WARN</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">com.example.demo</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">INFO</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#7EE787;">file</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#7EE787;">name</span><span style="color:#C9D1D9;">: </span><span style="color:#A5D6FF;">logs/application.log</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="\u6700\u4F73\u5B9E\u8DF5" tabindex="-1">\u6700\u4F73\u5B9E\u8DF5 <a class="header-anchor" href="#\u6700\u4F73\u5B9E\u8DF5" aria-hidden="true">#</a></h2><h3 id="\u9879\u76EE\u7ED3\u6784" tabindex="-1">\u9879\u76EE\u7ED3\u6784 <a class="header-anchor" href="#\u9879\u76EE\u7ED3\u6784" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#c9d1d9;">src/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u251C\u2500\u2500 main/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u251C\u2500\u2500 java/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502   \u2514\u2500\u2500 com/example/demo/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502       \u251C\u2500\u2500 config/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502       \u251C\u2500\u2500 controller/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502       \u251C\u2500\u2500 service/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502       \u251C\u2500\u2500 repository/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502       \u251C\u2500\u2500 model/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502       \u251C\u2500\u2500 dto/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502       \u251C\u2500\u2500 exception/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2502       \u2514\u2500\u2500 util/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502   \u2514\u2500\u2500 resources/</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502       \u251C\u2500\u2500 application.yml</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502       \u251C\u2500\u2500 application-dev.yml</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2502       \u2514\u2500\u2500 application-prod.yml</span></span>
<span class="line"><span style="color:#c9d1d9;">\u2514\u2500\u2500 test/</span></span>
<span class="line"><span style="color:#c9d1d9;">    \u2514\u2500\u2500 java/</span></span>
<span class="line"><span style="color:#c9d1d9;">        \u2514\u2500\u2500 com/example/demo/</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="\u6D4B\u8BD5" tabindex="-1">\u6D4B\u8BD5 <a class="header-anchor" href="#\u6D4B\u8BD5" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">SpringBootTest</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">AutoConfigureTestDatabase</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">UserServiceTest</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Autowired</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">private</span><span style="color:#C9D1D9;"> UserService</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">userService;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Test</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">shouldCreateUser</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">        User</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">user</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">User</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        user.</span><span style="color:#D2A8FF;">setName</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;John Doe&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        user.</span><span style="color:#D2A8FF;">setEmail</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;john@example.com&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        User</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">savedUser</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> userService.</span><span style="color:#D2A8FF;">save</span><span style="color:#C9D1D9;">(user);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#D2A8FF;">assertThat</span><span style="color:#C9D1D9;">(savedUser.</span><span style="color:#D2A8FF;">getId</span><span style="color:#C9D1D9;">()).</span><span style="color:#D2A8FF;">isNotNull</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#D2A8FF;">assertThat</span><span style="color:#C9D1D9;">(savedUser.</span><span style="color:#D2A8FF;">getName</span><span style="color:#C9D1D9;">()).</span><span style="color:#D2A8FF;">isEqualTo</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;John Doe&quot;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div>`,58),o=[e];function r(c,t,D,i,y,F){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{C as __pageData,u as default};
