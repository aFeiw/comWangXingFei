import{_ as s,c as n,o as a,a as l}from"./app.1f5371ca.js";const d=JSON.parse('{"title":"Redis \u5B66\u4E60\u7B14\u8BB0","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u76EE\u5F55","slug":"\u76EE\u5F55","link":"#\u76EE\u5F55","children":[{"level":3,"title":"\u57FA\u7840\u6982\u5FF5","slug":"\u57FA\u7840\u6982\u5FF5","link":"#\u57FA\u7840\u6982\u5FF5","children":[]},{"level":3,"title":"\u6838\u5FC3\u529F\u80FD","slug":"\u6838\u5FC3\u529F\u80FD","link":"#\u6838\u5FC3\u529F\u80FD","children":[]},{"level":3,"title":"\u9AD8\u7EA7\u7279\u6027","slug":"\u9AD8\u7EA7\u7279\u6027","link":"#\u9AD8\u7EA7\u7279\u6027","children":[]}]},{"level":2,"title":"\u5FEB\u901F\u5F00\u59CB","slug":"\u5FEB\u901F\u5F00\u59CB","link":"#\u5FEB\u901F\u5F00\u59CB","children":[{"level":3,"title":"\u5B89\u88C5 Redis","slug":"\u5B89\u88C5-redis","link":"#\u5B89\u88C5-redis","children":[]},{"level":3,"title":"\u57FA\u7840\u64CD\u4F5C","slug":"\u57FA\u7840\u64CD\u4F5C","link":"#\u57FA\u7840\u64CD\u4F5C","children":[]}]},{"level":2,"title":"\u6570\u636E\u7C7B\u578B","slug":"\u6570\u636E\u7C7B\u578B","link":"#\u6570\u636E\u7C7B\u578B","children":[{"level":3,"title":"\u5B57\u7B26\u4E32 (String)","slug":"\u5B57\u7B26\u4E32-string","link":"#\u5B57\u7B26\u4E32-string","children":[]},{"level":3,"title":"\u54C8\u5E0C (Hash)","slug":"\u54C8\u5E0C-hash","link":"#\u54C8\u5E0C-hash","children":[]},{"level":3,"title":"\u5217\u8868 (List)","slug":"\u5217\u8868-list","link":"#\u5217\u8868-list","children":[]},{"level":3,"title":"\u96C6\u5408 (Set)","slug":"\u96C6\u5408-set","link":"#\u96C6\u5408-set","children":[]},{"level":3,"title":"\u6709\u5E8F\u96C6\u5408 (Sorted Set)","slug":"\u6709\u5E8F\u96C6\u5408-sorted-set","link":"#\u6709\u5E8F\u96C6\u5408-sorted-set","children":[]}]},{"level":2,"title":"\u9AD8\u7EA7\u529F\u80FD","slug":"\u9AD8\u7EA7\u529F\u80FD","link":"#\u9AD8\u7EA7\u529F\u80FD","children":[{"level":3,"title":"\u4E8B\u52A1\u5904\u7406","slug":"\u4E8B\u52A1\u5904\u7406","link":"#\u4E8B\u52A1\u5904\u7406","children":[]},{"level":3,"title":"\u53D1\u5E03\u8BA2\u9605","slug":"\u53D1\u5E03\u8BA2\u9605","link":"#\u53D1\u5E03\u8BA2\u9605","children":[]},{"level":3,"title":"Lua \u811A\u672C","slug":"lua-\u811A\u672C","link":"#lua-\u811A\u672C","children":[]}]},{"level":2,"title":"\u6301\u4E45\u5316","slug":"\u6301\u4E45\u5316","link":"#\u6301\u4E45\u5316","children":[{"level":3,"title":"RDB \u5FEB\u7167","slug":"rdb-\u5FEB\u7167","link":"#rdb-\u5FEB\u7167","children":[]},{"level":3,"title":"AOF \u65E5\u5FD7","slug":"aof-\u65E5\u5FD7","link":"#aof-\u65E5\u5FD7","children":[]}]},{"level":2,"title":"\u96C6\u7FA4\u914D\u7F6E","slug":"\u96C6\u7FA4\u914D\u7F6E","link":"#\u96C6\u7FA4\u914D\u7F6E","children":[{"level":3,"title":"\u4E3B\u4ECE\u590D\u5236","slug":"\u4E3B\u4ECE\u590D\u5236","link":"#\u4E3B\u4ECE\u590D\u5236","children":[]},{"level":3,"title":"Redis Cluster","slug":"redis-cluster","link":"#redis-cluster","children":[]}]},{"level":2,"title":"\u6027\u80FD\u4F18\u5316","slug":"\u6027\u80FD\u4F18\u5316","link":"#\u6027\u80FD\u4F18\u5316","children":[{"level":3,"title":"\u5185\u5B58\u4F18\u5316","slug":"\u5185\u5B58\u4F18\u5316","link":"#\u5185\u5B58\u4F18\u5316","children":[]},{"level":3,"title":"\u8FDE\u63A5\u6C60\u914D\u7F6E","slug":"\u8FDE\u63A5\u6C60\u914D\u7F6E","link":"#\u8FDE\u63A5\u6C60\u914D\u7F6E","children":[]}]},{"level":2,"title":"\u76D1\u63A7\u548C\u8C03\u8BD5","slug":"\u76D1\u63A7\u548C\u8C03\u8BD5","link":"#\u76D1\u63A7\u548C\u8C03\u8BD5","children":[{"level":3,"title":"\u6027\u80FD\u76D1\u63A7","slug":"\u6027\u80FD\u76D1\u63A7","link":"#\u6027\u80FD\u76D1\u63A7","children":[]},{"level":3,"title":"\u8C03\u8BD5\u5DE5\u5177","slug":"\u8C03\u8BD5\u5DE5\u5177","link":"#\u8C03\u8BD5\u5DE5\u5177","children":[]}]},{"level":2,"title":"\u5B89\u5168\u914D\u7F6E","slug":"\u5B89\u5168\u914D\u7F6E","link":"#\u5B89\u5168\u914D\u7F6E","children":[{"level":3,"title":"\u8BBF\u95EE\u63A7\u5236","slug":"\u8BBF\u95EE\u63A7\u5236","link":"#\u8BBF\u95EE\u63A7\u5236","children":[]},{"level":3,"title":"\u7F51\u7EDC\u5B89\u5168","slug":"\u7F51\u7EDC\u5B89\u5168","link":"#\u7F51\u7EDC\u5B89\u5168","children":[]}]},{"level":2,"title":"\u6700\u4F73\u5B9E\u8DF5","slug":"\u6700\u4F73\u5B9E\u8DF5","link":"#\u6700\u4F73\u5B9E\u8DF5","children":[{"level":3,"title":"\u952E\u547D\u540D\u89C4\u8303","slug":"\u952E\u547D\u540D\u89C4\u8303","link":"#\u952E\u547D\u540D\u89C4\u8303","children":[]},{"level":3,"title":"\u6570\u636E\u7ED3\u6784\u9009\u62E9","slug":"\u6570\u636E\u7ED3\u6784\u9009\u62E9","link":"#\u6570\u636E\u7ED3\u6784\u9009\u62E9","children":[]},{"level":3,"title":"\u7F13\u5B58\u7B56\u7565","slug":"\u7F13\u5B58\u7B56\u7565","link":"#\u7F13\u5B58\u7B56\u7565","children":[]},{"level":3,"title":"\u9519\u8BEF\u5904\u7406","slug":"\u9519\u8BEF\u5904\u7406","link":"#\u9519\u8BEF\u5904\u7406","children":[]}]},{"level":2,"title":"\u5E94\u7528\u573A\u666F","slug":"\u5E94\u7528\u573A\u666F","link":"#\u5E94\u7528\u573A\u666F","children":[{"level":3,"title":"\u7F13\u5B58\u7CFB\u7EDF","slug":"\u7F13\u5B58\u7CFB\u7EDF","link":"#\u7F13\u5B58\u7CFB\u7EDF","children":[]},{"level":3,"title":"\u4F1A\u8BDD\u5B58\u50A8","slug":"\u4F1A\u8BDD\u5B58\u50A8","link":"#\u4F1A\u8BDD\u5B58\u50A8","children":[]},{"level":3,"title":"\u6D88\u606F\u961F\u5217","slug":"\u6D88\u606F\u961F\u5217","link":"#\u6D88\u606F\u961F\u5217","children":[]}]}],"relativePath":"backend/Redis/index.md","lastUpdated":1754016123000}'),p={name:"backend/Redis/index.md"},e=l(`<h1 id="redis-\u5B66\u4E60\u7B14\u8BB0" tabindex="-1">Redis \u5B66\u4E60\u7B14\u8BB0 <a class="header-anchor" href="#redis-\u5B66\u4E60\u7B14\u8BB0" aria-hidden="true">#</a></h1><p>Redis \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u5185\u5B58\u6570\u636E\u7ED3\u6784\u5B58\u50A8\u7CFB\u7EDF\uFF0C\u53EF\u7528\u4F5C\u6570\u636E\u5E93\u3001\u7F13\u5B58\u548C\u6D88\u606F\u4E2D\u95F4\u4EF6\u3002</p><h2 id="\u76EE\u5F55" tabindex="-1">\u76EE\u5F55 <a class="header-anchor" href="#\u76EE\u5F55" aria-hidden="true">#</a></h2><h3 id="\u57FA\u7840\u6982\u5FF5" tabindex="-1">\u57FA\u7840\u6982\u5FF5 <a class="header-anchor" href="#\u57FA\u7840\u6982\u5FF5" aria-hidden="true">#</a></h3><ul><li>Redis \u67B6\u6784\u7406\u89E3</li><li>\u6570\u636E\u7C7B\u578B\u8BE6\u89E3</li><li>\u6301\u4E45\u5316\u673A\u5236</li><li>\u5185\u5B58\u7BA1\u7406</li></ul><h3 id="\u6838\u5FC3\u529F\u80FD" tabindex="-1">\u6838\u5FC3\u529F\u80FD <a class="header-anchor" href="#\u6838\u5FC3\u529F\u80FD" aria-hidden="true">#</a></h3><ul><li>\u5B57\u7B26\u4E32\u64CD\u4F5C</li><li>\u54C8\u5E0C\u64CD\u4F5C</li><li>\u5217\u8868\u64CD\u4F5C</li><li>\u96C6\u5408\u64CD\u4F5C</li></ul><h3 id="\u9AD8\u7EA7\u7279\u6027" tabindex="-1">\u9AD8\u7EA7\u7279\u6027 <a class="header-anchor" href="#\u9AD8\u7EA7\u7279\u6027" aria-hidden="true">#</a></h3><ul><li>\u4E8B\u52A1\u5904\u7406</li><li>\u53D1\u5E03\u8BA2\u9605</li><li>Lua \u811A\u672C</li><li>\u96C6\u7FA4\u914D\u7F6E</li></ul><h2 id="\u5FEB\u901F\u5F00\u59CB" tabindex="-1">\u5FEB\u901F\u5F00\u59CB <a class="header-anchor" href="#\u5FEB\u901F\u5F00\u59CB" aria-hidden="true">#</a></h2><h3 id="\u5B89\u88C5-redis" tabindex="-1">\u5B89\u88C5 Redis <a class="header-anchor" href="#\u5B89\u88C5-redis" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># Ubuntu/Debian</span></span>
<span class="line"><span style="color:#C9D1D9;">sudo apt update</span></span>
<span class="line"><span style="color:#C9D1D9;">sudo apt install redis-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># CentOS/RHEL</span></span>
<span class="line"><span style="color:#C9D1D9;">sudo yum install redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># macOS</span></span>
<span class="line"><span style="color:#C9D1D9;">brew install redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u542F\u52A8 Redis</span></span>
<span class="line"><span style="color:#C9D1D9;">redis-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u8FDE\u63A5 Redis</span></span>
<span class="line"><span style="color:#C9D1D9;">redis-cli</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="\u57FA\u7840\u64CD\u4F5C" tabindex="-1">\u57FA\u7840\u64CD\u4F5C <a class="header-anchor" href="#\u57FA\u7840\u64CD\u4F5C" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u8BBE\u7F6E\u952E\u503C\u5BF9</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u83B7\u53D6\u503C</span></span>
<span class="line"><span style="color:#C9D1D9;">GET key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u68C0\u67E5\u952E\u662F\u5426\u5B58\u5728</span></span>
<span class="line"><span style="color:#C9D1D9;">EXISTS key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u5220\u9664\u952E</span></span>
<span class="line"><span style="color:#C9D1D9;">DEL key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u8BBE\u7F6E\u8FC7\u671F\u65F6\u95F4</span></span>
<span class="line"><span style="color:#C9D1D9;">EXPIRE key 3600</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u5269\u4F59\u8FC7\u671F\u65F6\u95F4</span></span>
<span class="line"><span style="color:#C9D1D9;">TTL key</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="\u6570\u636E\u7C7B\u578B" tabindex="-1">\u6570\u636E\u7C7B\u578B <a class="header-anchor" href="#\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a></h2><h3 id="\u5B57\u7B26\u4E32-string" tabindex="-1">\u5B57\u7B26\u4E32 (String) <a class="header-anchor" href="#\u5B57\u7B26\u4E32-string" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u57FA\u672C\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">SET name </span><span style="color:#A5D6FF;">&quot;John Doe&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">GET name</span></span>
<span class="line"><span style="color:#C9D1D9;">SET age 25</span></span>
<span class="line"><span style="color:#C9D1D9;">INCR age</span></span>
<span class="line"><span style="color:#C9D1D9;">DECR age</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u6279\u91CF\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">MSET key1 </span><span style="color:#A5D6FF;">&quot;value1&quot;</span><span style="color:#C9D1D9;"> key2 </span><span style="color:#A5D6FF;">&quot;value2&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">MGET key1 key2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u5B57\u7B26\u4E32\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">APPEND name </span><span style="color:#A5D6FF;">&quot; Jr&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">STRLEN name</span></span>
<span class="line"><span style="color:#C9D1D9;">GETRANGE name 0 3</span></span>
<span class="line"><span style="color:#C9D1D9;">SETRANGE name 0 </span><span style="color:#A5D6FF;">&quot;Jane&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="\u54C8\u5E0C-hash" tabindex="-1">\u54C8\u5E0C (Hash) <a class="header-anchor" href="#\u54C8\u5E0C-hash" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u54C8\u5E0C\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">HSET user:1 name </span><span style="color:#A5D6FF;">&quot;John&quot;</span><span style="color:#C9D1D9;"> age 25 email </span><span style="color:#A5D6FF;">&quot;john@example.com&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">HGET user:1 name</span></span>
<span class="line"><span style="color:#C9D1D9;">HGETALL user:1</span></span>
<span class="line"><span style="color:#C9D1D9;">HMSET user:2 name </span><span style="color:#A5D6FF;">&quot;Jane&quot;</span><span style="color:#C9D1D9;"> age 30 email </span><span style="color:#A5D6FF;">&quot;jane@example.com&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">HMGET user:2 name age</span></span>
<span class="line"><span style="color:#C9D1D9;">HDEL user:1 age</span></span>
<span class="line"><span style="color:#C9D1D9;">HEXISTS user:1 name</span></span>
<span class="line"><span style="color:#C9D1D9;">HKEYS user:1</span></span>
<span class="line"><span style="color:#C9D1D9;">HVALS user:1</span></span>
<span class="line"><span style="color:#C9D1D9;">HLEN user:1</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="\u5217\u8868-list" tabindex="-1">\u5217\u8868 (List) <a class="header-anchor" href="#\u5217\u8868-list" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u5217\u8868\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">LPUSH mylist </span><span style="color:#A5D6FF;">&quot;item1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">RPUSH mylist </span><span style="color:#A5D6FF;">&quot;item2&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">LPOP mylist</span></span>
<span class="line"><span style="color:#C9D1D9;">RPOP mylist</span></span>
<span class="line"><span style="color:#C9D1D9;">LRANGE mylist 0 -1</span></span>
<span class="line"><span style="color:#C9D1D9;">LLEN mylist</span></span>
<span class="line"><span style="color:#C9D1D9;">LINDEX mylist 0</span></span>
<span class="line"><span style="color:#C9D1D9;">LSET mylist 0 </span><span style="color:#A5D6FF;">&quot;new_item&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">LINSERT mylist BEFORE </span><span style="color:#A5D6FF;">&quot;item2&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;new_item&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">LREM mylist 1 </span><span style="color:#A5D6FF;">&quot;item1&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="\u96C6\u5408-set" tabindex="-1">\u96C6\u5408 (Set) <a class="header-anchor" href="#\u96C6\u5408-set" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u96C6\u5408\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">SADD myset </span><span style="color:#A5D6FF;">&quot;member1&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;member2&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;member3&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">SMEMBERS myset</span></span>
<span class="line"><span style="color:#C9D1D9;">SISMEMBER myset </span><span style="color:#A5D6FF;">&quot;member1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">SREM myset </span><span style="color:#A5D6FF;">&quot;member1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">SCARD myset</span></span>
<span class="line"><span style="color:#C9D1D9;">SPOP myset</span></span>
<span class="line"><span style="color:#C9D1D9;">SRANDMEMBER myset 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u96C6\u5408\u8FD0\u7B97</span></span>
<span class="line"><span style="color:#C9D1D9;">SADD set1 </span><span style="color:#A5D6FF;">&quot;a&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;b&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;c&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">SADD set2 </span><span style="color:#A5D6FF;">&quot;b&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;c&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;d&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">SINTER set1 set2</span></span>
<span class="line"><span style="color:#C9D1D9;">SUNION set1 set2</span></span>
<span class="line"><span style="color:#C9D1D9;">SDIFF set1 set2</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="\u6709\u5E8F\u96C6\u5408-sorted-set" tabindex="-1">\u6709\u5E8F\u96C6\u5408 (Sorted Set) <a class="header-anchor" href="#\u6709\u5E8F\u96C6\u5408-sorted-set" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u6709\u5E8F\u96C6\u5408\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">ZADD leaderboard 100 </span><span style="color:#A5D6FF;">&quot;player1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">ZADD leaderboard 200 </span><span style="color:#A5D6FF;">&quot;player2&quot;</span><span style="color:#C9D1D9;"> 150 </span><span style="color:#A5D6FF;">&quot;player3&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">ZRANGE leaderboard 0 -1 WITHSCORES</span></span>
<span class="line"><span style="color:#C9D1D9;">ZREVRANGE leaderboard 0 -1 WITHSCORES</span></span>
<span class="line"><span style="color:#C9D1D9;">ZSCORE leaderboard </span><span style="color:#A5D6FF;">&quot;player1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">ZRANK leaderboard </span><span style="color:#A5D6FF;">&quot;player1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">ZREVRANK leaderboard </span><span style="color:#A5D6FF;">&quot;player1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">ZCARD leaderboard</span></span>
<span class="line"><span style="color:#C9D1D9;">ZREM leaderboard </span><span style="color:#A5D6FF;">&quot;player1&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="\u9AD8\u7EA7\u529F\u80FD" tabindex="-1">\u9AD8\u7EA7\u529F\u80FD <a class="header-anchor" href="#\u9AD8\u7EA7\u529F\u80FD" aria-hidden="true">#</a></h2><h3 id="\u4E8B\u52A1\u5904\u7406" tabindex="-1">\u4E8B\u52A1\u5904\u7406 <a class="header-anchor" href="#\u4E8B\u52A1\u5904\u7406" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u5F00\u59CB\u4E8B\u52A1</span></span>
<span class="line"><span style="color:#C9D1D9;">MULTI</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u6267\u884C\u547D\u4EE4</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key1 </span><span style="color:#A5D6FF;">&quot;value1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key2 </span><span style="color:#A5D6FF;">&quot;value2&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">INCR counter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u63D0\u4EA4\u4E8B\u52A1</span></span>
<span class="line"><span style="color:#C9D1D9;">EXEC</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u6216\u8005\u53D6\u6D88\u4E8B\u52A1</span></span>
<span class="line"><span style="color:#C9D1D9;">DISCARD</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="\u53D1\u5E03\u8BA2\u9605" tabindex="-1">\u53D1\u5E03\u8BA2\u9605 <a class="header-anchor" href="#\u53D1\u5E03\u8BA2\u9605" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u8BA2\u9605\u9891\u9053</span></span>
<span class="line"><span style="color:#C9D1D9;">SUBSCRIBE news sports</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u53D1\u5E03\u6D88\u606F</span></span>
<span class="line"><span style="color:#C9D1D9;">PUBLISH news </span><span style="color:#A5D6FF;">&quot;Breaking news!&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">PUBLISH sports </span><span style="color:#A5D6FF;">&quot;Game started!&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u6A21\u5F0F\u8BA2\u9605</span></span>
<span class="line"><span style="color:#C9D1D9;">PSUBSCRIBE news.</span><span style="color:#FF7B72;">*</span></span>
<span class="line"><span style="color:#C9D1D9;">PUBLISH news.tech </span><span style="color:#A5D6FF;">&quot;New technology!&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="lua-\u811A\u672C" tabindex="-1">Lua \u811A\u672C <a class="header-anchor" href="#lua-\u811A\u672C" aria-hidden="true">#</a></h3><div class="language-lua line-numbers-mode"><button class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#8B949E;">-- \u539F\u5B50\u6027\u64CD\u4F5C\u793A\u4F8B</span></span>
<span class="line"><span style="color:#FF7B72;">local</span><span style="color:#C9D1D9;"> key </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> KEYS[</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">]</span></span>
<span class="line"><span style="color:#FF7B72;">local</span><span style="color:#C9D1D9;"> value </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ARGV[</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">]</span></span>
<span class="line"><span style="color:#FF7B72;">local</span><span style="color:#C9D1D9;"> ttl </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ARGV[</span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">-- \u68C0\u67E5\u952E\u662F\u5426\u5B58\u5728</span></span>
<span class="line"><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> redis.</span><span style="color:#79C0FF;">call</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;EXISTS&quot;</span><span style="color:#C9D1D9;">, key) </span><span style="color:#FF7B72;">==</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">then</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> redis.</span><span style="color:#79C0FF;">call</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;GET&quot;</span><span style="color:#C9D1D9;">, key)</span></span>
<span class="line"><span style="color:#FF7B72;">else</span></span>
<span class="line"><span style="color:#C9D1D9;">    redis.</span><span style="color:#79C0FF;">call</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;SET&quot;</span><span style="color:#C9D1D9;">, key, value)</span></span>
<span class="line"><span style="color:#C9D1D9;">    redis.</span><span style="color:#79C0FF;">call</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;EXPIRE&quot;</span><span style="color:#C9D1D9;">, key, ttl)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> value</span></span>
<span class="line"><span style="color:#FF7B72;">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u6267\u884C Lua \u811A\u672C</span></span>
<span class="line"><span style="color:#C9D1D9;">redis-cli --eval script.lua key1 , value1 3600</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u6301\u4E45\u5316" tabindex="-1">\u6301\u4E45\u5316 <a class="header-anchor" href="#\u6301\u4E45\u5316" aria-hidden="true">#</a></h2><h3 id="rdb-\u5FEB\u7167" tabindex="-1">RDB \u5FEB\u7167 <a class="header-anchor" href="#rdb-\u5FEB\u7167" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u914D\u7F6E\u6587\u4EF6 redis.conf</span></span>
<span class="line"><span style="color:#C9D1D9;">save 900 1      </span><span style="color:#8B949E;"># 900\u79D2\u5185\u81F3\u5C111\u4E2A\u952E\u88AB\u4FEE\u6539</span></span>
<span class="line"><span style="color:#C9D1D9;">save 300 10     </span><span style="color:#8B949E;"># 300\u79D2\u5185\u81F3\u5C1110\u4E2A\u952E\u88AB\u4FEE\u6539</span></span>
<span class="line"><span style="color:#C9D1D9;">save 60 10000   </span><span style="color:#8B949E;"># 60\u79D2\u5185\u81F3\u5C1110000\u4E2A\u952E\u88AB\u4FEE\u6539</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u624B\u52A8\u4FDD\u5B58</span></span>
<span class="line"><span style="color:#C9D1D9;">SAVE</span></span>
<span class="line"><span style="color:#C9D1D9;">BGSAVE</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="aof-\u65E5\u5FD7" tabindex="-1">AOF \u65E5\u5FD7 <a class="header-anchor" href="#aof-\u65E5\u5FD7" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u914D\u7F6E\u6587\u4EF6 redis.conf</span></span>
<span class="line"><span style="color:#C9D1D9;">appendonly yes</span></span>
<span class="line"><span style="color:#C9D1D9;">appendfsync always    </span><span style="color:#8B949E;"># \u6BCF\u6B21\u5199\u5165\u90FD\u540C\u6B65</span></span>
<span class="line"><span style="color:#C9D1D9;">appendfsync everysec  </span><span style="color:#8B949E;"># \u6BCF\u79D2\u540C\u6B65\u4E00\u6B21</span></span>
<span class="line"><span style="color:#C9D1D9;">appendfsync no        </span><span style="color:#8B949E;"># \u7531\u64CD\u4F5C\u7CFB\u7EDF\u51B3\u5B9A</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># AOF \u91CD\u5199</span></span>
<span class="line"><span style="color:#C9D1D9;">BGREWRITEAOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="\u96C6\u7FA4\u914D\u7F6E" tabindex="-1">\u96C6\u7FA4\u914D\u7F6E <a class="header-anchor" href="#\u96C6\u7FA4\u914D\u7F6E" aria-hidden="true">#</a></h2><h3 id="\u4E3B\u4ECE\u590D\u5236" tabindex="-1">\u4E3B\u4ECE\u590D\u5236 <a class="header-anchor" href="#\u4E3B\u4ECE\u590D\u5236" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u4E3B\u670D\u52A1\u5668\u914D\u7F6E</span></span>
<span class="line"><span style="color:#8B949E;"># redis.conf</span></span>
<span class="line"><span style="color:#79C0FF;">bind</span><span style="color:#C9D1D9;"> 127.0.0.1</span></span>
<span class="line"><span style="color:#C9D1D9;">port 6379</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u4ECE\u670D\u52A1\u5668\u914D\u7F6E</span></span>
<span class="line"><span style="color:#8B949E;"># redis.conf</span></span>
<span class="line"><span style="color:#79C0FF;">bind</span><span style="color:#C9D1D9;"> 127.0.0.1</span></span>
<span class="line"><span style="color:#C9D1D9;">port 6380</span></span>
<span class="line"><span style="color:#C9D1D9;">slaveof 127.0.0.1 6379</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="redis-cluster" tabindex="-1">Redis Cluster <a class="header-anchor" href="#redis-cluster" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u521B\u5EFA\u96C6\u7FA4</span></span>
<span class="line"><span style="color:#C9D1D9;">redis-cli --cluster create 127.0.0.1:7000 127.0.0.1:7001 \\</span></span>
<span class="line"><span style="color:#C9D1D9;">127.0.0.1:7002 127.0.0.1:7003 127.0.0.1:7004 127.0.0.1:7005 \\</span></span>
<span class="line"><span style="color:#C9D1D9;">--cluster-replicas 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u8FDE\u63A5\u96C6\u7FA4</span></span>
<span class="line"><span style="color:#C9D1D9;">redis-cli -c -p 7000</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="\u6027\u80FD\u4F18\u5316" tabindex="-1">\u6027\u80FD\u4F18\u5316 <a class="header-anchor" href="#\u6027\u80FD\u4F18\u5316" aria-hidden="true">#</a></h2><h3 id="\u5185\u5B58\u4F18\u5316" tabindex="-1">\u5185\u5B58\u4F18\u5316 <a class="header-anchor" href="#\u5185\u5B58\u4F18\u5316" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u8BBE\u7F6E\u6700\u5927\u5185\u5B58</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET maxmemory 2gb</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u5185\u5B58\u7B56\u7565</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET maxmemory-policy allkeys-lru</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET maxmemory-policy volatile-lru</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET maxmemory-policy allkeys-random</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET maxmemory-policy volatile-random</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET maxmemory-policy volatile-ttl</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET maxmemory-policy noeviction</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="\u8FDE\u63A5\u6C60\u914D\u7F6E" tabindex="-1">\u8FDE\u63A5\u6C60\u914D\u7F6E <a class="header-anchor" href="#\u8FDE\u63A5\u6C60\u914D\u7F6E" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#8B949E;"># Python \u8FDE\u63A5\u6C60\u793A\u4F8B</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">pool </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> redis.ConnectionPool(</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FFA657;">host</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&#39;localhost&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FFA657;">port</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">6379</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FFA657;">db</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FFA657;">max_connections</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">20</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FFA657;">decode_responses</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">True</span></span>
<span class="line"><span style="color:#C9D1D9;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">r </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> redis.Redis(</span><span style="color:#FFA657;">connection_pool</span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;">pool)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-java line-numbers-mode"><button class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#8B949E;">// Java \u8FDE\u63A5\u6C60\u793A\u4F8B</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#FF7B72;">Configuration</span></span>
<span class="line"><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">RedisConfig</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    @</span><span style="color:#FF7B72;">Bean</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">public</span><span style="color:#C9D1D9;"> RedisTemplate&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#C9D1D9;">, </span><span style="color:#FF7B72;">Object</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">redisTemplate</span><span style="color:#C9D1D9;">(RedisConnectionFactory </span><span style="color:#FFA657;">factory</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        RedisTemplate</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">String</span><span style="color:#FFA657;">, </span><span style="color:#FF7B72;">Object</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">template</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> RedisTemplate&lt;&gt;();</span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">setConnectionFactory</span><span style="color:#C9D1D9;">(factory);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u8BBE\u7F6E\u5E8F\u5217\u5316\u5668</span></span>
<span class="line"><span style="color:#C9D1D9;">        Jackson2JsonRedisSerializer</span><span style="color:#FFA657;">&lt;</span><span style="color:#FF7B72;">Object</span><span style="color:#FFA657;">&gt; </span><span style="color:#C9D1D9;">serializer</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> Jackson2JsonRedisSerializer&lt;&gt;(Object.class);</span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">setKeySerializer</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">StringRedisSerializer</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">        template.</span><span style="color:#D2A8FF;">setValueSerializer</span><span style="color:#C9D1D9;">(serializer);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> template;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="\u76D1\u63A7\u548C\u8C03\u8BD5" tabindex="-1">\u76D1\u63A7\u548C\u8C03\u8BD5 <a class="header-anchor" href="#\u76D1\u63A7\u548C\u8C03\u8BD5" aria-hidden="true">#</a></h2><h3 id="\u6027\u80FD\u76D1\u63A7" tabindex="-1">\u6027\u80FD\u76D1\u63A7 <a class="header-anchor" href="#\u6027\u80FD\u76D1\u63A7" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u7EDF\u8BA1\u4FE1\u606F</span></span>
<span class="line"><span style="color:#C9D1D9;">INFO</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u5185\u5B58\u4F7F\u7528</span></span>
<span class="line"><span style="color:#C9D1D9;">INFO memory</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u547D\u4EE4\u7EDF\u8BA1</span></span>
<span class="line"><span style="color:#C9D1D9;">INFO stats</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u6162\u67E5\u8BE2</span></span>
<span class="line"><span style="color:#C9D1D9;">SLOWLOG GET 10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u8BBE\u7F6E\u6162\u67E5\u8BE2\u9608\u503C</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET slowlog-log-slower-than 10000</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="\u8C03\u8BD5\u5DE5\u5177" tabindex="-1">\u8C03\u8BD5\u5DE5\u5177 <a class="header-anchor" href="#\u8C03\u8BD5\u5DE5\u5177" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u76D1\u63A7\u547D\u4EE4</span></span>
<span class="line"><span style="color:#C9D1D9;">MONITOR</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u952E\u7A7A\u95F4\u7EDF\u8BA1</span></span>
<span class="line"><span style="color:#C9D1D9;">INFO keyspace</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u5BA2\u6237\u7AEF\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#C9D1D9;">CLIENT LIST</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u914D\u7F6E</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG GET </span><span style="color:#FF7B72;">*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u67E5\u770B\u670D\u52A1\u5668\u4FE1\u606F</span></span>
<span class="line"><span style="color:#C9D1D9;">INFO server</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="\u5B89\u5168\u914D\u7F6E" tabindex="-1">\u5B89\u5168\u914D\u7F6E <a class="header-anchor" href="#\u5B89\u5168\u914D\u7F6E" aria-hidden="true">#</a></h2><h3 id="\u8BBF\u95EE\u63A7\u5236" tabindex="-1">\u8BBF\u95EE\u63A7\u5236 <a class="header-anchor" href="#\u8BBF\u95EE\u63A7\u5236" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u8BBE\u7F6E\u5BC6\u7801</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET requirepass </span><span style="color:#A5D6FF;">&quot;your_password&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u8BA4\u8BC1</span></span>
<span class="line"><span style="color:#C9D1D9;">AUTH your_password</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u91CD\u547D\u540D\u5371\u9669\u547D\u4EE4</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET rename-command FLUSHDB </span><span style="color:#A5D6FF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET rename-command FLUSHALL </span><span style="color:#A5D6FF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET rename-command KEYS </span><span style="color:#A5D6FF;">&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="\u7F51\u7EDC\u5B89\u5168" tabindex="-1">\u7F51\u7EDC\u5B89\u5168 <a class="header-anchor" href="#\u7F51\u7EDC\u5B89\u5168" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u7ED1\u5B9A\u7F51\u7EDC\u63A5\u53E3</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET </span><span style="color:#79C0FF;">bind</span><span style="color:#C9D1D9;"> 127.0.0.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u7981\u7528\u5371\u9669\u547D\u4EE4</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET rename-command DEBUG </span><span style="color:#A5D6FF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET rename-command CONFIG </span><span style="color:#A5D6FF;">&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u8BBE\u7F6E\u8D85\u65F6</span></span>
<span class="line"><span style="color:#C9D1D9;">CONFIG SET timeout 300</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="\u6700\u4F73\u5B9E\u8DF5" tabindex="-1">\u6700\u4F73\u5B9E\u8DF5 <a class="header-anchor" href="#\u6700\u4F73\u5B9E\u8DF5" aria-hidden="true">#</a></h2><h3 id="\u952E\u547D\u540D\u89C4\u8303" tabindex="-1">\u952E\u547D\u540D\u89C4\u8303 <a class="header-anchor" href="#\u952E\u547D\u540D\u89C4\u8303" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u4F7F\u7528\u5192\u53F7\u5206\u9694</span></span>
<span class="line"><span style="color:#C9D1D9;">user:1:profile</span></span>
<span class="line"><span style="color:#C9D1D9;">user:1:posts</span></span>
<span class="line"><span style="color:#C9D1D9;">post:1:comments</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u4F7F\u7528\u70B9\u5206\u9694</span></span>
<span class="line"><span style="color:#C9D1D9;">user.1.profile</span></span>
<span class="line"><span style="color:#C9D1D9;">user.1.posts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u4F7F\u7528\u4E0B\u5212\u7EBF\u5206\u9694</span></span>
<span class="line"><span style="color:#C9D1D9;">user_1_profile</span></span>
<span class="line"><span style="color:#C9D1D9;">user_1_posts</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="\u6570\u636E\u7ED3\u6784\u9009\u62E9" tabindex="-1">\u6570\u636E\u7ED3\u6784\u9009\u62E9 <a class="header-anchor" href="#\u6570\u636E\u7ED3\u6784\u9009\u62E9" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u5B57\u7B26\u4E32\uFF1A\u7B80\u5355\u952E\u503C\u5BF9</span></span>
<span class="line"><span style="color:#C9D1D9;">SET user:1:name </span><span style="color:#A5D6FF;">&quot;John&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u54C8\u5E0C\uFF1A\u5BF9\u8C61\u5C5E\u6027</span></span>
<span class="line"><span style="color:#C9D1D9;">HSET user:1 name </span><span style="color:#A5D6FF;">&quot;John&quot;</span><span style="color:#C9D1D9;"> age 25 email </span><span style="color:#A5D6FF;">&quot;john@example.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u5217\u8868\uFF1A\u961F\u5217\u3001\u65F6\u95F4\u7EBF</span></span>
<span class="line"><span style="color:#C9D1D9;">LPUSH timeline:user:1 </span><span style="color:#A5D6FF;">&quot;post:1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">LPUSH timeline:user:1 </span><span style="color:#A5D6FF;">&quot;post:2&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u96C6\u5408\uFF1A\u6807\u7B7E\u3001\u597D\u53CB</span></span>
<span class="line"><span style="color:#C9D1D9;">SADD post:1:tags </span><span style="color:#A5D6FF;">&quot;redis&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;database&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">SADD user:1:friends </span><span style="color:#A5D6FF;">&quot;user:2&quot;</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&quot;user:3&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u6709\u5E8F\u96C6\u5408\uFF1A\u6392\u884C\u699C\u3001\u65F6\u95F4\u6392\u5E8F</span></span>
<span class="line"><span style="color:#C9D1D9;">ZADD leaderboard 100 </span><span style="color:#A5D6FF;">&quot;player1&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">ZADD posts:user:1 1640995200 </span><span style="color:#A5D6FF;">&quot;post:1&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="\u7F13\u5B58\u7B56\u7565" tabindex="-1">\u7F13\u5B58\u7B56\u7565 <a class="header-anchor" href="#\u7F13\u5B58\u7B56\u7565" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u8BBE\u7F6E\u8FC7\u671F\u65F6\u95F4</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key value EX 3600</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key value PX 3600000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u6761\u4EF6\u8BBE\u7F6E</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key value NX EX 3600  </span><span style="color:#8B949E;"># \u4E0D\u5B58\u5728\u65F6\u8BBE\u7F6E</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key value XX EX 3600  </span><span style="color:#8B949E;"># \u5B58\u5728\u65F6\u8BBE\u7F6E</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u539F\u5B50\u6027\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key value EX 3600</span></span>
<span class="line"><span style="color:#C9D1D9;">GET key</span></span>
<span class="line"><span style="color:#C9D1D9;">DEL key</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="\u9519\u8BEF\u5904\u7406" tabindex="-1">\u9519\u8BEF\u5904\u7406 <a class="header-anchor" href="#\u9519\u8BEF\u5904\u7406" aria-hidden="true">#</a></h3><div class="language-bash line-numbers-mode"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#8B949E;"># \u68C0\u67E5\u952E\u662F\u5426\u5B58\u5728</span></span>
<span class="line"><span style="color:#C9D1D9;">EXISTS key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u5B89\u5168\u5220\u9664</span></span>
<span class="line"><span style="color:#C9D1D9;">DEL key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;"># \u539F\u5B50\u6027\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#C9D1D9;">MULTI</span></span>
<span class="line"><span style="color:#C9D1D9;">SET key value</span></span>
<span class="line"><span style="color:#C9D1D9;">EXPIRE key 3600</span></span>
<span class="line"><span style="color:#C9D1D9;">EXEC</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="\u5E94\u7528\u573A\u666F" tabindex="-1">\u5E94\u7528\u573A\u666F <a class="header-anchor" href="#\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a></h2><h3 id="\u7F13\u5B58\u7CFB\u7EDF" tabindex="-1">\u7F13\u5B58\u7CFB\u7EDF <a class="header-anchor" href="#\u7F13\u5B58\u7CFB\u7EDF" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#8B949E;"># \u7F13\u5B58\u88C5\u9970\u5668</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> redis</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> json</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> functools</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">r </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> redis.Redis(</span><span style="color:#FFA657;">host</span><span style="color:#FF7B72;">=</span><span style="color:#A5D6FF;">&#39;localhost&#39;</span><span style="color:#C9D1D9;">, </span><span style="color:#FFA657;">port</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">6379</span><span style="color:#C9D1D9;">, </span><span style="color:#FFA657;">db</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">cache</span><span style="color:#C9D1D9;">(expire</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">3600</span><span style="color:#C9D1D9;">):</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">decorator</span><span style="color:#C9D1D9;">(func):</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#D2A8FF;">@functools.wraps</span><span style="color:#C9D1D9;">(func)</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">wrapper</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;">args, </span><span style="color:#FF7B72;">**</span><span style="color:#C9D1D9;">kwargs):</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;"># \u751F\u6210\u7F13\u5B58\u952E</span></span>
<span class="line"><span style="color:#C9D1D9;">            cache_key </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">f</span><span style="color:#A5D6FF;">&quot;</span><span style="color:#79C0FF;">{</span><span style="color:#C9D1D9;">func.</span><span style="color:#79C0FF;">__name__}</span><span style="color:#A5D6FF;">:</span><span style="color:#79C0FF;">{hash</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">str</span><span style="color:#C9D1D9;">(args) </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">str</span><span style="color:#C9D1D9;">(kwargs))</span><span style="color:#79C0FF;">}</span><span style="color:#A5D6FF;">&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;"># \u5C1D\u8BD5\u4ECE\u7F13\u5B58\u83B7\u53D6</span></span>
<span class="line"><span style="color:#C9D1D9;">            cached </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> r.get(cache_key)</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> cached:</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> json.loads(cached)</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;"># \u6267\u884C\u51FD\u6570</span></span>
<span class="line"><span style="color:#C9D1D9;">            result </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> func(</span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;">args, </span><span style="color:#FF7B72;">**</span><span style="color:#C9D1D9;">kwargs)</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#8B949E;"># \u5B58\u5165\u7F13\u5B58</span></span>
<span class="line"><span style="color:#C9D1D9;">            r.setex(cache_key, expire, json.dumps(result))</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> result</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> wrapper</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> decorator</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="\u4F1A\u8BDD\u5B58\u50A8" tabindex="-1">\u4F1A\u8BDD\u5B58\u50A8 <a class="header-anchor" href="#\u4F1A\u8BDD\u5B58\u50A8" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#8B949E;"># \u4F1A\u8BDD\u7BA1\u7406</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> uuid</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">SessionManager</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">__init__</span><span style="color:#C9D1D9;">(self, redis_client):</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.redis </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> redis_client</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">create_session</span><span style="color:#C9D1D9;">(self, user_id):</span></span>
<span class="line"><span style="color:#C9D1D9;">        session_id </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">str</span><span style="color:#C9D1D9;">(uuid.uuid4())</span></span>
<span class="line"><span style="color:#C9D1D9;">        session_data </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#A5D6FF;">&#39;user_id&#39;</span><span style="color:#C9D1D9;">: user_id,</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#A5D6FF;">&#39;created_at&#39;</span><span style="color:#C9D1D9;">: time.time()</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.redis.setex(</span><span style="color:#FF7B72;">f</span><span style="color:#A5D6FF;">&quot;session:</span><span style="color:#79C0FF;">{</span><span style="color:#C9D1D9;">session_id</span><span style="color:#79C0FF;">}</span><span style="color:#A5D6FF;">&quot;</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">3600</span><span style="color:#C9D1D9;">, json.dumps(session_data))</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> session_id</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">get_session</span><span style="color:#C9D1D9;">(self, session_id):</span></span>
<span class="line"><span style="color:#C9D1D9;">        data </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.redis.get(</span><span style="color:#FF7B72;">f</span><span style="color:#A5D6FF;">&quot;session:</span><span style="color:#79C0FF;">{</span><span style="color:#C9D1D9;">session_id</span><span style="color:#79C0FF;">}</span><span style="color:#A5D6FF;">&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> data:</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> json.loads(data)</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">None</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">delete_session</span><span style="color:#C9D1D9;">(self, session_id):</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.redis.delete(</span><span style="color:#FF7B72;">f</span><span style="color:#A5D6FF;">&quot;session:</span><span style="color:#79C0FF;">{</span><span style="color:#C9D1D9;">session_id</span><span style="color:#79C0FF;">}</span><span style="color:#A5D6FF;">&quot;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="\u6D88\u606F\u961F\u5217" tabindex="-1">\u6D88\u606F\u961F\u5217 <a class="header-anchor" href="#\u6D88\u606F\u961F\u5217" aria-hidden="true">#</a></h3><div class="language-python line-numbers-mode"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#8B949E;"># \u7B80\u5355\u6D88\u606F\u961F\u5217</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">MessageQueue</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">__init__</span><span style="color:#C9D1D9;">(self, redis_client, queue_name):</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.redis </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> redis_client</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.queue_name </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> queue_name</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">enqueue</span><span style="color:#C9D1D9;">(self, message):</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.redis.lpush(</span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.queue_name, json.dumps(message))</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">def</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">dequeue</span><span style="color:#C9D1D9;">(self, timeout</span><span style="color:#FF7B72;">=</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">):</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> timeout </span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">            result </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.redis.brpop(</span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.queue_name, timeout)</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> result:</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> json.loads(result[</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">])</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;">:</span></span>
<span class="line"><span style="color:#C9D1D9;">            result </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.redis.rpop(</span><span style="color:#79C0FF;">self</span><span style="color:#C9D1D9;">.queue_name)</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> result:</span></span>
<span class="line"><span style="color:#C9D1D9;">                </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> json.loads(result)</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">None</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div>`,75),r=[e];function o(c,i,t,b,D,u){return a(),n("div",null,r)}const m=s(p,[["render",o]]);export{d as __pageData,m as default};
