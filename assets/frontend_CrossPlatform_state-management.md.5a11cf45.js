import{_ as s,c as n,o as a,a as l}from"./app.2c0d76d1.js";const b=JSON.parse('{"title":"State \u7BA1\u7406","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u72B6\u6001\u7BA1\u7406\u57FA\u7840","slug":"\u72B6\u6001\u7BA1\u7406\u57FA\u7840","link":"#\u72B6\u6001\u7BA1\u7406\u57FA\u7840","children":[{"level":3,"title":"1. \u72B6\u6001\u7C7B\u578B","slug":"_1-\u72B6\u6001\u7C7B\u578B","link":"#_1-\u72B6\u6001\u7C7B\u578B","children":[]}]},{"level":2,"title":"Provider \u72B6\u6001\u7BA1\u7406","slug":"provider-\u72B6\u6001\u7BA1\u7406","link":"#provider-\u72B6\u6001\u7BA1\u7406","children":[{"level":3,"title":"1. \u57FA\u672C\u4F7F\u7528","slug":"_1-\u57FA\u672C\u4F7F\u7528","link":"#_1-\u57FA\u672C\u4F7F\u7528","children":[]},{"level":3,"title":"2. \u591A Provider","slug":"_2-\u591A-provider","link":"#_2-\u591A-provider","children":[]},{"level":3,"title":"3. Selector \u4F18\u5316","slug":"_3-selector-\u4F18\u5316","link":"#_3-selector-\u4F18\u5316","children":[]}]},{"level":2,"title":"Riverpod \u72B6\u6001\u7BA1\u7406","slug":"riverpod-\u72B6\u6001\u7BA1\u7406","link":"#riverpod-\u72B6\u6001\u7BA1\u7406","children":[{"level":3,"title":"1. \u57FA\u672C\u4F7F\u7528","slug":"_1-\u57FA\u672C\u4F7F\u7528-1","link":"#_1-\u57FA\u672C\u4F7F\u7528-1","children":[]},{"level":3,"title":"2. Future Provider","slug":"_2-future-provider","link":"#_2-future-provider","children":[]},{"level":3,"title":"3. State Provider","slug":"_3-state-provider","link":"#_3-state-provider","children":[]}]},{"level":2,"title":"Bloc \u72B6\u6001\u7BA1\u7406","slug":"bloc-\u72B6\u6001\u7BA1\u7406","link":"#bloc-\u72B6\u6001\u7BA1\u7406","children":[{"level":3,"title":"1. \u57FA\u672C Bloc","slug":"_1-\u57FA\u672C-bloc","link":"#_1-\u57FA\u672C-bloc","children":[]},{"level":3,"title":"2. \u5F02\u6B65 Bloc","slug":"_2-\u5F02\u6B65-bloc","link":"#_2-\u5F02\u6B65-bloc","children":[]}]},{"level":2,"title":"GetX \u72B6\u6001\u7BA1\u7406","slug":"getx-\u72B6\u6001\u7BA1\u7406","link":"#getx-\u72B6\u6001\u7BA1\u7406","children":[{"level":3,"title":"1. \u57FA\u672C\u4F7F\u7528","slug":"_1-\u57FA\u672C\u4F7F\u7528-2","link":"#_1-\u57FA\u672C\u4F7F\u7528-2","children":[]},{"level":3,"title":"2. \u54CD\u5E94\u5F0F\u72B6\u6001","slug":"_2-\u54CD\u5E94\u5F0F\u72B6\u6001","link":"#_2-\u54CD\u5E94\u5F0F\u72B6\u6001","children":[]}]},{"level":2,"title":"\u72B6\u6001\u7BA1\u7406\u6700\u4F73\u5B9E\u8DF5","slug":"\u72B6\u6001\u7BA1\u7406\u6700\u4F73\u5B9E\u8DF5","link":"#\u72B6\u6001\u7BA1\u7406\u6700\u4F73\u5B9E\u8DF5","children":[{"level":3,"title":"1. \u72B6\u6001\u5206\u79BB","slug":"_1-\u72B6\u6001\u5206\u79BB","link":"#_1-\u72B6\u6001\u5206\u79BB","children":[]},{"level":3,"title":"2. \u72B6\u6001\u6301\u4E45\u5316","slug":"_2-\u72B6\u6001\u6301\u4E45\u5316","link":"#_2-\u72B6\u6001\u6301\u4E45\u5316","children":[]},{"level":3,"title":"3. \u72B6\u6001\u6D4B\u8BD5","slug":"_3-\u72B6\u6001\u6D4B\u8BD5","link":"#_3-\u72B6\u6001\u6D4B\u8BD5","children":[]}]},{"level":2,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3","link":"#\u603B\u7ED3","children":[]}],"relativePath":"frontend/CrossPlatform/state-management.md","lastUpdated":1754012005000}'),p={name:"frontend/CrossPlatform/state-management.md"},e=l(`<h1 id="state-\u7BA1\u7406" tabindex="-1">State \u7BA1\u7406 <a class="header-anchor" href="#state-\u7BA1\u7406" aria-hidden="true">#</a></h1><p>Flutter \u4E2D\u7684\u72B6\u6001\u7BA1\u7406\u662F\u5E94\u7528\u5F00\u53D1\u7684\u6838\u5FC3\u6982\u5FF5\uFF0C\u5408\u7406\u7684\u72B6\u6001\u7BA1\u7406\u65B9\u6848\u80FD\u591F\u63D0\u9AD8\u5E94\u7528\u7684\u53EF\u7EF4\u62A4\u6027\u548C\u6027\u80FD\u3002</p><h2 id="\u72B6\u6001\u7BA1\u7406\u57FA\u7840" tabindex="-1">\u72B6\u6001\u7BA1\u7406\u57FA\u7840 <a class="header-anchor" href="#\u72B6\u6001\u7BA1\u7406\u57FA\u7840" aria-hidden="true">#</a></h2><h3 id="_1-\u72B6\u6001\u7C7B\u578B" tabindex="-1">1. \u72B6\u6001\u7C7B\u578B <a class="header-anchor" href="#_1-\u72B6\u6001\u7C7B\u578B" aria-hidden="true">#</a></h3><h4 id="ephemeral-state-\u4E34\u65F6\u72B6\u6001" tabindex="-1">Ephemeral State (\u4E34\u65F6\u72B6\u6001) <a class="header-anchor" href="#ephemeral-state-\u4E34\u65F6\u72B6\u6001" aria-hidden="true">#</a></h4><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">StatefulWidget</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">_CounterWidgetState</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">createState</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">_CounterWidgetState</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">_CounterWidgetState</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">State</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterWidget</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">int</span><span style="color:#C9D1D9;"> _counter </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">; </span><span style="color:#8B949E;">// \u4E34\u65F6\u72B6\u6001</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">_increment</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">setState</span><span style="color:#C9D1D9;">(() {</span></span>
<span class="line"><span style="color:#C9D1D9;">      _counter</span><span style="color:#FF7B72;">++</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Column</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      children</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> [</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Count: $</span><span style="color:#79C0FF;">_counter</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">          onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> _increment,</span></span>
<span class="line"><span style="color:#C9D1D9;">          child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Increment&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">        ),</span></span>
<span class="line"><span style="color:#C9D1D9;">      ],</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="app-state-\u5E94\u7528\u72B6\u6001" tabindex="-1">App State (\u5E94\u7528\u72B6\u6001) <a class="header-anchor" href="#app-state-\u5E94\u7528\u72B6\u6001" aria-hidden="true">#</a></h4><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#8B949E;">// \u5168\u5C40\u72B6\u6001\uFF0C\u9700\u8981\u5728\u591A\u4E2A Widget \u95F4\u5171\u4EAB</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> name;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> email;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">({</span><span style="color:#FF7B72;">required</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.name, </span><span style="color:#FF7B72;">required</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.email});</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">AppState</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ChangeNotifier</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> _currentUser;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">bool</span><span style="color:#C9D1D9;"> _isLoading </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">currentUser</span><span style="color:#C9D1D9;"> =&gt; _currentUser;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">bool</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">isLoading</span><span style="color:#C9D1D9;"> =&gt; _isLoading;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setUser</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;"> user) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _currentUser </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> user;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">setLoading</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">bool</span><span style="color:#C9D1D9;"> loading) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _isLoading </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> loading;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">logout</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _currentUser </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="provider-\u72B6\u6001\u7BA1\u7406" tabindex="-1">Provider \u72B6\u6001\u7BA1\u7406 <a class="header-anchor" href="#provider-\u72B6\u6001\u7BA1\u7406" aria-hidden="true">#</a></h2><h3 id="_1-\u57FA\u672C\u4F7F\u7528" tabindex="-1">1. \u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#_1-\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;package:provider/provider.dart&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u521B\u5EFA Provider</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterProvider</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ChangeNotifier</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">int</span><span style="color:#C9D1D9;"> _count </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">int</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">count</span><span style="color:#C9D1D9;"> =&gt; _count;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">increment</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _count</span><span style="color:#FF7B72;">++</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">decrement</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _count</span><span style="color:#FF7B72;">--</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u5728 MaterialApp \u4E2D\u63D0\u4F9B Provider</span></span>
<span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#D2A8FF;">runApp</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#79C0FF;">ChangeNotifierProvider</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      create</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (context) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterProvider</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">      child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">MyApp</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">    ),</span></span>
<span class="line"><span style="color:#C9D1D9;">  );</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u5728 Widget \u4E2D\u4F7F\u7528</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">StatelessWidget</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Consumer</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterProvider</span><span style="color:#C9D1D9;">&gt;(</span></span>
<span class="line"><span style="color:#C9D1D9;">      builder</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (context, counter, child) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Column</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">          children</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> [</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Count: \${</span><span style="color:#79C0FF;">counter</span><span style="color:#A5D6FF;">.</span><span style="color:#79C0FF;">count</span><span style="color:#A5D6FF;">}&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">              onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> () </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> counter.</span><span style="color:#D2A8FF;">increment</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">              child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Increment&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">            ),</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">              onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> () </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> counter.</span><span style="color:#D2A8FF;">decrement</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">              child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Decrement&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">            ),</span></span>
<span class="line"><span style="color:#C9D1D9;">          ],</span></span>
<span class="line"><span style="color:#C9D1D9;">        );</span></span>
<span class="line"><span style="color:#C9D1D9;">      },</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="_2-\u591A-provider" tabindex="-1">2. \u591A Provider <a class="header-anchor" href="#_2-\u591A-provider" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#8B949E;">// \u7528\u6237\u72B6\u6001</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserProvider</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ChangeNotifier</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> _user;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">user</span><span style="color:#C9D1D9;"> =&gt; _user;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">login</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> email, </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> password) </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u6A21\u62DF\u767B\u5F55</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">delayed</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">Duration</span><span style="color:#C9D1D9;">(seconds</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">    _user </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">(name</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;John Doe&#39;</span><span style="color:#C9D1D9;">, email</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> email);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">logout</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _user </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u4E3B\u9898\u72B6\u6001</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeProvider</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ChangeNotifier</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">bool</span><span style="color:#C9D1D9;"> _isDarkMode </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">bool</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">isDarkMode</span><span style="color:#C9D1D9;"> =&gt; _isDarkMode;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">ThemeData</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">theme</span><span style="color:#C9D1D9;"> =&gt; _isDarkMode </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeData</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">dark</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeData</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">light</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">toggleTheme</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _isDarkMode </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">!</span><span style="color:#C9D1D9;">_isDarkMode;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u591A Provider \u8BBE\u7F6E</span></span>
<span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#D2A8FF;">runApp</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#79C0FF;">MultiProvider</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      providers</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> [</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">ChangeNotifierProvider</span><span style="color:#C9D1D9;">(create</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (_) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserProvider</span><span style="color:#C9D1D9;">()),</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">ChangeNotifierProvider</span><span style="color:#C9D1D9;">(create</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (_) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeProvider</span><span style="color:#C9D1D9;">()),</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">ChangeNotifierProvider</span><span style="color:#C9D1D9;">(create</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (_) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterProvider</span><span style="color:#C9D1D9;">()),</span></span>
<span class="line"><span style="color:#C9D1D9;">      ],</span></span>
<span class="line"><span style="color:#C9D1D9;">      child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">MyApp</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">    ),</span></span>
<span class="line"><span style="color:#C9D1D9;">  );</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="_3-selector-\u4F18\u5316" tabindex="-1">3. Selector \u4F18\u5316 <a class="header-anchor" href="#_3-selector-\u4F18\u5316" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#8B949E;">// \u4F7F\u7528 Selector \u53EA\u76D1\u542C\u7279\u5B9A\u72B6\u6001\u53D8\u5316</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">OptimizedWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">StatelessWidget</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Selector</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterProvider</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">int</span><span style="color:#C9D1D9;">&gt;(</span></span>
<span class="line"><span style="color:#C9D1D9;">      selector</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (context, provider) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> provider.count,</span></span>
<span class="line"><span style="color:#C9D1D9;">      builder</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (context, count, child) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Count: $</span><span style="color:#79C0FF;">count</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">      },</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u76D1\u542C\u591A\u4E2A\u72B6\u6001</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserProfileWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">StatelessWidget</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Selector2</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">UserProvider</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">ThemeProvider</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">?&gt;(</span></span>
<span class="line"><span style="color:#C9D1D9;">      selector</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (context, userProvider, themeProvider) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> userProvider.user,</span></span>
<span class="line"><span style="color:#C9D1D9;">      builder</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (context, user, child) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (user </span><span style="color:#FF7B72;">==</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">          </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Please login&#39;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        }</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Column</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">          children</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> [</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Welcome, \${</span><span style="color:#79C0FF;">user</span><span style="color:#A5D6FF;">.</span><span style="color:#79C0FF;">name</span><span style="color:#A5D6FF;">}&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Email: \${</span><span style="color:#79C0FF;">user</span><span style="color:#A5D6FF;">.</span><span style="color:#79C0FF;">email</span><span style="color:#A5D6FF;">}&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">          ],</span></span>
<span class="line"><span style="color:#C9D1D9;">        );</span></span>
<span class="line"><span style="color:#C9D1D9;">      },</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="riverpod-\u72B6\u6001\u7BA1\u7406" tabindex="-1">Riverpod \u72B6\u6001\u7BA1\u7406 <a class="header-anchor" href="#riverpod-\u72B6\u6001\u7BA1\u7406" aria-hidden="true">#</a></h2><h3 id="_1-\u57FA\u672C\u4F7F\u7528-1" tabindex="-1">1. \u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#_1-\u57FA\u672C\u4F7F\u7528-1" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;package:flutter_riverpod/flutter_riverpod.dart&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u521B\u5EFA Provider</span></span>
<span class="line"><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> counterProvider </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">StateNotifierProvider</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterNotifier</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">int</span><span style="color:#C9D1D9;">&gt;((ref) {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterNotifier</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterNotifier</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">StateNotifier</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">int</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">CounterNotifier</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">super</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">increment</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> state</span><span style="color:#FF7B72;">++</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">decrement</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> state</span><span style="color:#FF7B72;">--</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u5728 Widget \u4E2D\u4F7F\u7528</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ConsumerWidget</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context, </span><span style="color:#79C0FF;">WidgetRef</span><span style="color:#C9D1D9;"> ref) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> count </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ref.</span><span style="color:#D2A8FF;">watch</span><span style="color:#C9D1D9;">(counterProvider);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Column</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      children</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> [</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Count: $</span><span style="color:#79C0FF;">count</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">          onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> () </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> ref.</span><span style="color:#D2A8FF;">read</span><span style="color:#C9D1D9;">(counterProvider.notifier).</span><span style="color:#D2A8FF;">increment</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">          child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Increment&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">        ),</span></span>
<span class="line"><span style="color:#C9D1D9;">      ],</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="_2-future-provider" tabindex="-1">2. Future Provider <a class="header-anchor" href="#_2-future-provider" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#8B949E;">// \u5F02\u6B65\u6570\u636E Provider</span></span>
<span class="line"><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> userProvider </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">FutureProvider</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">&gt;((ref) </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u6A21\u62DF\u7F51\u7EDC\u8BF7\u6C42</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">delayed</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">Duration</span><span style="color:#C9D1D9;">(seconds</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">(name</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;John Doe&#39;</span><span style="color:#C9D1D9;">, email</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;john@example.com&#39;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u5728 Widget \u4E2D\u4F7F\u7528</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ConsumerWidget</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context, </span><span style="color:#79C0FF;">WidgetRef</span><span style="color:#C9D1D9;"> ref) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> userAsync </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ref.</span><span style="color:#D2A8FF;">watch</span><span style="color:#C9D1D9;">(userProvider);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> userAsync.</span><span style="color:#D2A8FF;">when</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      data</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (user) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Welcome, \${</span><span style="color:#79C0FF;">user</span><span style="color:#A5D6FF;">.</span><span style="color:#79C0FF;">name</span><span style="color:#A5D6FF;">}&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">      loading</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> () </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CircularProgressIndicator</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">      error</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (error, stack) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Error: $</span><span style="color:#79C0FF;">error</span><span style="color:#A5D6FF;">&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_3-state-provider" tabindex="-1">3. State Provider <a class="header-anchor" href="#_3-state-provider" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#8B949E;">// \u7B80\u5355\u72B6\u6001</span></span>
<span class="line"><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> themeProvider </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">StateProvider</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">&gt;((ref) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.light);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u5728 Widget \u4E2D\u4F7F\u7528</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeToggleWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ConsumerWidget</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context, </span><span style="color:#79C0FF;">WidgetRef</span><span style="color:#C9D1D9;"> ref) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> themeMode </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ref.</span><span style="color:#D2A8FF;">watch</span><span style="color:#C9D1D9;">(themeProvider);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Switch</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      value</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> themeMode </span><span style="color:#FF7B72;">==</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.dark,</span></span>
<span class="line"><span style="color:#C9D1D9;">      onChanged</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (isDark) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        ref.</span><span style="color:#D2A8FF;">read</span><span style="color:#C9D1D9;">(themeProvider.notifier).state </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span></span>
<span class="line"><span style="color:#C9D1D9;">          isDark </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.dark </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.light;</span></span>
<span class="line"><span style="color:#C9D1D9;">      },</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="bloc-\u72B6\u6001\u7BA1\u7406" tabindex="-1">Bloc \u72B6\u6001\u7BA1\u7406 <a class="header-anchor" href="#bloc-\u72B6\u6001\u7BA1\u7406" aria-hidden="true">#</a></h2><h3 id="_1-\u57FA\u672C-bloc" tabindex="-1">1. \u57FA\u672C Bloc <a class="header-anchor" href="#_1-\u57FA\u672C-bloc" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;package:flutter_bloc/flutter_bloc.dart&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#FF7B72;">abstract</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterEvent</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">IncrementEvent</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterEvent</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">DecrementEvent</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterEvent</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u72B6\u6001</span></span>
<span class="line"><span style="color:#FF7B72;">abstract</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterState</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">int</span><span style="color:#C9D1D9;"> count;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">CounterState</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.count);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterInitial</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterState</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">CounterInitial</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">super</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterUpdated</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterState</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">CounterUpdated</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">int</span><span style="color:#C9D1D9;"> count) </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">super</span><span style="color:#C9D1D9;">(count);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// Bloc</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterBloc</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Bloc</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterEvent</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">CounterState</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">CounterBloc</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">super</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">CounterInitial</span><span style="color:#C9D1D9;">()) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">on&lt;</span><span style="color:#79C0FF;">IncrementEvent</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;">((event, emit) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">emit</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">CounterUpdated</span><span style="color:#C9D1D9;">(state.count </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">on&lt;</span><span style="color:#79C0FF;">DecrementEvent</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;">((event, emit) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">emit</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">CounterUpdated</span><span style="color:#C9D1D9;">(state.count </span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u5728 Widget \u4E2D\u4F7F\u7528</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">StatelessWidget</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">BlocProvider</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      create</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (context) </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterBloc</span><span style="color:#C9D1D9;">(),</span></span>
<span class="line"><span style="color:#C9D1D9;">      child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">BlocBuilder</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterBloc</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">CounterState</span><span style="color:#C9D1D9;">&gt;(</span></span>
<span class="line"><span style="color:#C9D1D9;">        builder</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> (context, state) {</span></span>
<span class="line"><span style="color:#C9D1D9;">          </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Column</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">            children</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> [</span></span>
<span class="line"><span style="color:#C9D1D9;">              </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Count: \${</span><span style="color:#79C0FF;">state</span><span style="color:#A5D6FF;">.</span><span style="color:#79C0FF;">count</span><span style="color:#A5D6FF;">}&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">              </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">                onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> () </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> context.</span><span style="color:#D2A8FF;">read</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterBloc</span><span style="color:#C9D1D9;">&gt;().</span><span style="color:#D2A8FF;">add</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">IncrementEvent</span><span style="color:#C9D1D9;">()),</span></span>
<span class="line"><span style="color:#C9D1D9;">                child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Increment&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">              ),</span></span>
<span class="line"><span style="color:#C9D1D9;">              </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">                onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> () </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> context.</span><span style="color:#D2A8FF;">read</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterBloc</span><span style="color:#C9D1D9;">&gt;().</span><span style="color:#D2A8FF;">add</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">DecrementEvent</span><span style="color:#C9D1D9;">()),</span></span>
<span class="line"><span style="color:#C9D1D9;">                child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Decrement&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">              ),</span></span>
<span class="line"><span style="color:#C9D1D9;">            ],</span></span>
<span class="line"><span style="color:#C9D1D9;">          );</span></span>
<span class="line"><span style="color:#C9D1D9;">        },</span></span>
<span class="line"><span style="color:#C9D1D9;">      ),</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h3 id="_2-\u5F02\u6B65-bloc" tabindex="-1">2. \u5F02\u6B65 Bloc <a class="header-anchor" href="#_2-\u5F02\u6B65-bloc" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#8B949E;">// \u7528\u6237\u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#FF7B72;">abstract</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserEvent</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">LoadUserEvent</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserEvent</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">LoginEvent</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserEvent</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> email;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> password;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">LoginEvent</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.email, </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.password);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u7528\u6237\u72B6\u6001</span></span>
<span class="line"><span style="color:#FF7B72;">abstract</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserState</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserInitial</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserState</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserLoading</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserState</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserLoaded</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserState</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;"> user;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">UserLoaded</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.user);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserError</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserState</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> message;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">UserError</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.message);</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u7528\u6237 Bloc</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserBloc</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Bloc</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">UserEvent</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">UserState</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">UserBloc</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">super</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">UserInitial</span><span style="color:#C9D1D9;">()) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">on&lt;</span><span style="color:#79C0FF;">LoadUserEvent</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;">((event, emit) </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">emit</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">UserLoading</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u6A21\u62DF\u7F51\u7EDC\u8BF7\u6C42</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">delayed</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">Duration</span><span style="color:#C9D1D9;">(seconds</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> user </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">(name</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;John Doe&#39;</span><span style="color:#C9D1D9;">, email</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;john@example.com&#39;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#D2A8FF;">emit</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">UserLoaded</span><span style="color:#C9D1D9;">(user));</span></span>
<span class="line"><span style="color:#C9D1D9;">      } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (e) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#D2A8FF;">emit</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">UserError</span><span style="color:#C9D1D9;">(e.</span><span style="color:#D2A8FF;">toString</span><span style="color:#C9D1D9;">()));</span></span>
<span class="line"><span style="color:#C9D1D9;">      }</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">on&lt;</span><span style="color:#79C0FF;">LoginEvent</span><span style="color:#FF7B72;">&gt;</span><span style="color:#C9D1D9;">((event, emit) </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">emit</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">UserLoading</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u6A21\u62DF\u767B\u5F55</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">delayed</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">Duration</span><span style="color:#C9D1D9;">(seconds</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> user </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">(name</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;Logged User&#39;</span><span style="color:#C9D1D9;">, email</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> event.email);</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#D2A8FF;">emit</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">UserLoaded</span><span style="color:#C9D1D9;">(user));</span></span>
<span class="line"><span style="color:#C9D1D9;">      } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (e) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#D2A8FF;">emit</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">UserError</span><span style="color:#C9D1D9;">(e.</span><span style="color:#D2A8FF;">toString</span><span style="color:#C9D1D9;">()));</span></span>
<span class="line"><span style="color:#C9D1D9;">      }</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h2 id="getx-\u72B6\u6001\u7BA1\u7406" tabindex="-1">GetX \u72B6\u6001\u7BA1\u7406 <a class="header-anchor" href="#getx-\u72B6\u6001\u7BA1\u7406" aria-hidden="true">#</a></h2><h3 id="_1-\u57FA\u672C\u4F7F\u7528-2" tabindex="-1">1. \u57FA\u672C\u4F7F\u7528 <a class="header-anchor" href="#_1-\u57FA\u672C\u4F7F\u7528-2" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;package:get/get.dart&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u63A7\u5236\u5668</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterController</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">GetxController</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> count </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">0.</span><span style="color:#C9D1D9;">obs;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">increment</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> count</span><span style="color:#FF7B72;">++</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">decrement</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> count</span><span style="color:#FF7B72;">--</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u5728 Widget \u4E2D\u4F7F\u7528</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">GetView</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">CounterController</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Column</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      children</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> [</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">Obx</span><span style="color:#C9D1D9;">(() </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Count: \${</span><span style="color:#79C0FF;">controller</span><span style="color:#A5D6FF;">.</span><span style="color:#79C0FF;">count</span><span style="color:#A5D6FF;">}&#39;</span><span style="color:#C9D1D9;">)),</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">          onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> controller.increment,</span></span>
<span class="line"><span style="color:#C9D1D9;">          child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Increment&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">        ),</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">          onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> controller.decrement,</span></span>
<span class="line"><span style="color:#C9D1D9;">          child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Decrement&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">        ),</span></span>
<span class="line"><span style="color:#C9D1D9;">      ],</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u7ED1\u5B9A\u63A7\u5236\u5668</span></span>
<span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Get</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">put</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">CounterController</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#D2A8FF;">runApp</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">MyApp</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="_2-\u54CD\u5E94\u5F0F\u72B6\u6001" tabindex="-1">2. \u54CD\u5E94\u5F0F\u72B6\u6001 <a class="header-anchor" href="#_2-\u54CD\u5E94\u5F0F\u72B6\u6001" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserController</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">GetxController</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> user </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Rx</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">?&gt;(</span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> isLoading </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">.obs;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">login</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> email, </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> password) </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    isLoading.value </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">delayed</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">Duration</span><span style="color:#C9D1D9;">(seconds</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">));</span></span>
<span class="line"><span style="color:#C9D1D9;">      user.value </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">(name</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;John Doe&#39;</span><span style="color:#C9D1D9;">, email</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> email);</span></span>
<span class="line"><span style="color:#C9D1D9;">    } </span><span style="color:#FF7B72;">catch</span><span style="color:#C9D1D9;"> (e) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#79C0FF;">Get</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">snackbar</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Error&#39;</span><span style="color:#C9D1D9;">, e.</span><span style="color:#D2A8FF;">toString</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">    } </span><span style="color:#FF7B72;">finally</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">      isLoading.value </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">logout</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    user.value </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// \u5728 Widget \u4E2D\u4F7F\u7528</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">UserWidget</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">GetView</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#79C0FF;">UserController</span><span style="color:#C9D1D9;">&gt; {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">@override</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Widget</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">build</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">BuildContext</span><span style="color:#C9D1D9;"> context) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Column</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      children</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> [</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">Obx</span><span style="color:#C9D1D9;">(() {</span></span>
<span class="line"><span style="color:#C9D1D9;">          </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (controller.isLoading.value) {</span></span>
<span class="line"><span style="color:#C9D1D9;">            </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CircularProgressIndicator</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">          }</span></span>
<span class="line"><span style="color:#C9D1D9;">          </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> controller.user.value </span><span style="color:#FF7B72;">!=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">null</span></span>
<span class="line"><span style="color:#C9D1D9;">              </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Welcome, \${</span><span style="color:#79C0FF;">controller</span><span style="color:#A5D6FF;">.</span><span style="color:#79C0FF;">user</span><span style="color:#A5D6FF;">.</span><span style="color:#79C0FF;">value</span><span style="color:#A5D6FF;">!.</span><span style="color:#79C0FF;">name</span><span style="color:#A5D6FF;">}&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">              </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Please login&#39;</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">        }),</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#79C0FF;">ElevatedButton</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">          onPressed</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> () </span><span style="color:#FF7B72;">=&gt;</span><span style="color:#C9D1D9;"> controller.</span><span style="color:#D2A8FF;">login</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;john@example.com&#39;</span><span style="color:#C9D1D9;">, </span><span style="color:#A5D6FF;">&#39;password&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">          child</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">Text</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;Login&#39;</span><span style="color:#C9D1D9;">),</span></span>
<span class="line"><span style="color:#C9D1D9;">        ),</span></span>
<span class="line"><span style="color:#C9D1D9;">      ],</span></span>
<span class="line"><span style="color:#C9D1D9;">    );</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="\u72B6\u6001\u7BA1\u7406\u6700\u4F73\u5B9E\u8DF5" tabindex="-1">\u72B6\u6001\u7BA1\u7406\u6700\u4F73\u5B9E\u8DF5 <a class="header-anchor" href="#\u72B6\u6001\u7BA1\u7406\u6700\u4F73\u5B9E\u8DF5" aria-hidden="true">#</a></h2><h3 id="_1-\u72B6\u6001\u5206\u79BB" tabindex="-1">1. \u72B6\u6001\u5206\u79BB <a class="header-anchor" href="#_1-\u72B6\u6001\u5206\u79BB" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#8B949E;">// \u5C06\u72B6\u6001\u6309\u529F\u80FD\u5206\u79BB</span></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">AuthState</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ChangeNotifier</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> _user;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">bool</span><span style="color:#C9D1D9;"> _isLoading </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">user</span><span style="color:#C9D1D9;"> =&gt; _user;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">bool</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">isLoading</span><span style="color:#C9D1D9;"> =&gt; _isLoading;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">bool</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">isAuthenticated</span><span style="color:#C9D1D9;"> =&gt; _user </span><span style="color:#FF7B72;">!=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">login</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> email, </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> password) </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _isLoading </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">try</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#8B949E;">// \u767B\u5F55\u903B\u8F91</span></span>
<span class="line"><span style="color:#C9D1D9;">      _user </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> authService.</span><span style="color:#D2A8FF;">login</span><span style="color:#C9D1D9;">(email, password);</span></span>
<span class="line"><span style="color:#C9D1D9;">    } </span><span style="color:#FF7B72;">finally</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">      _isLoading </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeState</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ChangeNotifier</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;"> _themeMode </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.light;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">themeMode</span><span style="color:#C9D1D9;"> =&gt; _themeMode;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">toggleTheme</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _themeMode </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> _themeMode </span><span style="color:#FF7B72;">==</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.light </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.dark </span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.light;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="_2-\u72B6\u6001\u6301\u4E45\u5316" tabindex="-1">2. \u72B6\u6001\u6301\u4E45\u5316 <a class="header-anchor" href="#_2-\u72B6\u6001\u6301\u4E45\u5316" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;package:shared_preferences/shared_preferences.dart&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">class</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">PersistentState</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">extends</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ChangeNotifier</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> _themeKey </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;theme_mode&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">static</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">String</span><span style="color:#C9D1D9;"> _userKey </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;user_data&#39;</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;"> _themeMode </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.light;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> _user;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">themeMode</span><span style="color:#C9D1D9;"> =&gt; _themeMode;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">User</span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">get</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">user</span><span style="color:#C9D1D9;"> =&gt; _user;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u52A0\u8F7D\u6301\u4E45\u5316\u6570\u636E</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">loadPersistedData</span><span style="color:#C9D1D9;">() </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> prefs </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">SharedPreferences</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">getInstance</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u52A0\u8F7D\u4E3B\u9898\u8BBE\u7F6E</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> themeIndex </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> prefs.</span><span style="color:#D2A8FF;">getInt</span><span style="color:#C9D1D9;">(_themeKey) </span><span style="color:#FF7B72;">??</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    _themeMode </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;">.values[themeIndex];</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u52A0\u8F7D\u7528\u6237\u6570\u636E</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> userData </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> prefs.</span><span style="color:#D2A8FF;">getString</span><span style="color:#C9D1D9;">(_userKey);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (userData </span><span style="color:#FF7B72;">!=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      _user </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">fromJson</span><span style="color:#C9D1D9;">(</span><span style="color:#D2A8FF;">jsonDecode</span><span style="color:#C9D1D9;">(userData));</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u4FDD\u5B58\u4E3B\u9898\u8BBE\u7F6E</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">setThemeMode</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">ThemeMode</span><span style="color:#C9D1D9;"> mode) </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _themeMode </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> mode;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> prefs </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">SharedPreferences</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">getInstance</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> prefs.</span><span style="color:#D2A8FF;">setInt</span><span style="color:#C9D1D9;">(_themeKey, mode.index);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u4FDD\u5B58\u7528\u6237\u6570\u636E</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#79C0FF;">Future</span><span style="color:#C9D1D9;">&lt;</span><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;">&gt; </span><span style="color:#D2A8FF;">setUser</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">User</span><span style="color:#C9D1D9;"> user) </span><span style="color:#FF7B72;">async</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    _user </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> user;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">final</span><span style="color:#C9D1D9;"> prefs </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">SharedPreferences</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">getInstance</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">await</span><span style="color:#C9D1D9;"> prefs.</span><span style="color:#D2A8FF;">setString</span><span style="color:#C9D1D9;">(_userKey, </span><span style="color:#D2A8FF;">jsonEncode</span><span style="color:#C9D1D9;">(user.</span><span style="color:#D2A8FF;">toJson</span><span style="color:#C9D1D9;">()));</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">notifyListeners</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="_3-\u72B6\u6001\u6D4B\u8BD5" tabindex="-1">3. \u72B6\u6001\u6D4B\u8BD5 <a class="header-anchor" href="#_3-\u72B6\u6001\u6D4B\u8BD5" aria-hidden="true">#</a></h3><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#8B949E;">// \u6D4B\u8BD5 Provider</span></span>
<span class="line"><span style="color:#FF7B72;">void</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">main</span><span style="color:#C9D1D9;">() {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#D2A8FF;">group</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;CounterProvider Tests&#39;</span><span style="color:#C9D1D9;">, () {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">late</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterProvider</span><span style="color:#C9D1D9;"> provider;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">setUp</span><span style="color:#C9D1D9;">(() {</span></span>
<span class="line"><span style="color:#C9D1D9;">      provider </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CounterProvider</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">test</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;initial count should be 0&#39;</span><span style="color:#C9D1D9;">, () {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">expect</span><span style="color:#C9D1D9;">(provider.count, </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">test</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;increment should increase count by 1&#39;</span><span style="color:#C9D1D9;">, () {</span></span>
<span class="line"><span style="color:#C9D1D9;">      provider.</span><span style="color:#D2A8FF;">increment</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">expect</span><span style="color:#C9D1D9;">(provider.count, </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">test</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;decrement should decrease count by 1&#39;</span><span style="color:#C9D1D9;">, () {</span></span>
<span class="line"><span style="color:#C9D1D9;">      provider.</span><span style="color:#D2A8FF;">increment</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">      provider.</span><span style="color:#D2A8FF;">decrement</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">expect</span><span style="color:#C9D1D9;">(provider.count, </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    });</span></span>
<span class="line"><span style="color:#C9D1D9;">  });</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="\u603B\u7ED3" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a></h2><p>\u72B6\u6001\u7BA1\u7406\u65B9\u6848\u9009\u62E9\uFF1A</p><ul><li><strong>Provider</strong>: \u7B80\u5355\u5E94\u7528\uFF0C\u5B66\u4E60\u6210\u672C\u4F4E</li><li><strong>Riverpod</strong>: \u73B0\u4EE3\u5316\u65B9\u6848\uFF0C\u7C7B\u578B\u5B89\u5168\uFF0C\u6D4B\u8BD5\u53CB\u597D</li><li><strong>Bloc</strong>: \u590D\u6742\u5E94\u7528\uFF0C\u4E8B\u4EF6\u9A71\u52A8\uFF0C\u53EF\u9884\u6D4B</li><li><strong>GetX</strong>: \u5168\u529F\u80FD\u6846\u67B6\uFF0C\u5305\u542B\u8DEF\u7531\u3001\u4F9D\u8D56\u6CE8\u5165\u7B49</li></ul><p>\u9009\u62E9\u539F\u5219\uFF1A</p><ol><li><strong>\u9879\u76EE\u89C4\u6A21</strong>: \u5C0F\u9879\u76EE\u7528 Provider\uFF0C\u5927\u9879\u76EE\u7528 Bloc</li><li><strong>\u56E2\u961F\u7ECF\u9A8C</strong>: \u719F\u6089\u5EA6\u4F18\u5148\u8003\u8651</li><li><strong>\u6027\u80FD\u8981\u6C42</strong>: \u8003\u8651\u6E32\u67D3\u4F18\u5316\u548C\u5185\u5B58\u4F7F\u7528</li><li><strong>\u6D4B\u8BD5\u9700\u6C42</strong>: \u9009\u62E9\u6613\u4E8E\u6D4B\u8BD5\u7684\u65B9\u6848</li></ol>`,44),o=[e];function r(c,t,D,y,i,F){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{b as __pageData,u as default};
